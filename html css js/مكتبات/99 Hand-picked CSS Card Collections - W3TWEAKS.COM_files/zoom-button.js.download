!function(o){"use strict";window.jnews.zoom=window.jnews.zoom||{},window.jnews.zoom={init:function(){var n=this;n.container=o("body"),n.refresh=!1,n.is_enable=void 0!==jnewsoption.zoom_button?jnewsoption.zoom_button:0,n.is_rtl=void 0!==jnewsoption.zoom_button?parseInt(jnewsoption.rtl):0,n.transform_origin=n.is_rtl?"top right":"0 0",n.zoomContainer=n.container.find(".jeg_meta_zoom"),(n.is_enable&&n.zoomContainer.length>0||n.zoomContainer.length>0)&&(n.zoomOut=n.zoomContainer.find(".zoom-out"),n.zoomReset=n.zoomContainer.find(".zoom-reset"),n.zoomIn=n.zoomContainer.find(".zoom-in"),n.zoomInStep=n.zoomContainer.attr("data-in-step"),n.zoomOutStep=10-n.zoomContainer.attr("data-out-step"),n.zoomLevel=1,n.progressBar=n.zoomContainer.find(".zoom-bar"),n.zoomEvent(),null!==n.getZoomCookie("zoom_position")&&n.updateZoomCookie(n.getZoomCookie("zoom_position")))},setSizeContent:function(n,t){var e=this,i=n,r=e.container.find(".content-inner");1!=n?e.container.addClass("jnews_zoom_activated"):e.container.removeClass("jnews_zoom_activated"),r.length>0&&r.each((function(n,t){var e=o(t),r=null===e.parents(".jeg_inner_content").width()?e.parents(".jeg_custom_content_wrapper").width():e.parents(".jeg_inner_content").width(),a=e.parents(".entry-content"),s=e.parents(".with-share"),m=parseInt(e.css("marginLeft").replace("px","")),c=parseInt(e.css("marginRight").replace("px","")),d=e.height(),h=e[0].getBoundingClientRect().height,f=i>=1?h>d?h:d:h>d?d:h,g=f-f/i,z=s.length>0?m+c:0,u=i>=1?r/i-z:r/i-2*z;u=1==i?"":u,a.length>0?(a.css({height:parseInt(f)+"px"}),e.css({width:u}),e.find(" > *").css({maxWidth:u})):(e.css({marginBottom:g+30}),e.css({width:u}),e.find(" > *").css({maxWidth:u}))})),t&&setTimeout((function(){e.setSizeContent(n,!1)}),150)},resetZoom:function(){var n=this;n.zoomLevel=1,n.updateProgressBar(1),document.cookie="zoom_position="+n.zoomLevel+"; path=/;",n.setSizeContent(n.zoomLevel,!0);var t=n.container.find(".content-inner"),e=t.parents(".entry-content");t.length>0&&t.each((function(i,r){n.refresh=!0;var a=o(r);a.find(" > *").css({maxWidth:""}),a.css({"-ms-zoom":"","-ms-transform":"","-ms-transform-origin":"","-moz-transform":"","-moz-transform-origin":"","-o-transform":"","-o-transform-origin":"","-webkit-transform":"","-webkit-transform-origin":"",overflow:"",width:""}).trigger("containerchange"),e.length>0?e.css({height:""}):t.css({marginBottom:""})}))},updateZoomCookie:function(n){var t=this;t.updateProgressBar(n);var e=t.container.find(".content-inner"),i="scale("+n+")",r=n,a=t.transform_origin,s="hidden";1==n&&(i="",r="",a="",s=""),e.length&&e.each((function(n,e){t.refresh=!0,o(e).css({"-ms-zoom":r,"-ms-transform":i,"-ms-transform-origin":a,"-moz-transform":i,"-moz-transform-origin":a,"-o-transform":i,"-o-transform-origin":a,"-webkit-transform":i,"-webkit-transform-origin":a,overflow:s}).trigger("containerchange")})),t.setSizeContent(n,!0)},updateZoom:function(n){var t=this;t.zoomLevel+=n,t.zoomLevel=t.zoomLevel>1+t.zoomInStep/10?1+t.zoomInStep/10:t.zoomLevel,t.zoomLevel=t.zoomLevel<t.zoomOutStep/10?t.zoomOutStep/10:t.zoomLevel,t.updateProgressBar(t.zoomLevel),document.cookie="zoom_position="+t.zoomLevel+"; path=/;";var e="scale("+t.zoomLevel+")",i=t.zoomLevel,r=t.transform_origin,a="hidden";1==t.zoomLevel&&(e="",i="",r="",a="");var s=t.container.find(".content-inner");s.length&&s.each((function(n,s){t.refresh=!0,o(s).css({"-ms-zoom":i,"-ms-transform":e,"-ms-transform-origin":r,"-moz-transform":e,"-moz-transform-origin":r,"-o-transform":e,"-o-transform-origin":r,"-webkit-transform":e,"-webkit-transform-origin":r,overflow:a}).trigger("containerchange")})),t.setSizeContent(t.zoomLevel,!0)},getZoomCookie:function(o){var n=document.cookie.match("(^|;) ?"+o+"=([^;]*)(;|$)");return n?n[2]:null},updateProgressBar:function(n){var t=o(this.progressBar),e=100*(n-.8)/.5+0,i=e+"%";e<=100?t.width(i):e>100&&t.width("100%")},zoomEvent:function(){var n=this,t=n.container.find(".content-inner");n.width=o(window).width(),n.height=o(window).height(),n.zoomOut.on("click",(function(){n.updateZoom(-.1)})),n.zoomIn.on("click",(function(){n.updateZoom(.1)})),n.zoomReset.on("click",(function(){n.resetZoom()})),t.length&&t.each((function(t,e){n.getZoomCookie("zoom_position");var i=o(e);i.off("containerchange DOMSubtreeModified changed.owl.carousel refreshed.owl.carousel").on("containerchange DOMSubtreeModified changed.owl.carousel refreshed.owl.carousel",(function(t){var e=o(this),r=e.parents(".post-autoload").length?e.parents(".post-autoload").data("id"):0,a=e;r&&(a=n.container.find('.post-autoload[data-id="'+r+'"]').find(".content-inner"));if(n.refresh){n.refresh=!1;var s=a.find(".owl-carousel");setTimeout((function(){s.each((function(n,t){o(t).data("owl.carousel").onResize(),i.trigger("contaianerchange")}))}),1500)}setTimeout(function(){var t=o(this),e=n.getZoomCookie("zoom_position"),i=t.parents(".entry-content"),r=t.parents(".post-autoload").length?t.parents(".post-autoload").data("id"):0,a=t;r&&(a=n.container.find('.post-autoload[data-id="'+r+'"]').find(".content-inner"));var s=a.height(),m=a[0].getBoundingClientRect().height,c=e>=1?m>s?m:s:m>s?s:m;i.length>0&&i.css({height:parseInt(c)+"px"})}.bind(this),1e3)}))})),o(window).resize((function(){o(window).width()===n.width&&o(window).height()===n.height||(n.width=o(window).width(),n.height=o(window).height(),n.resetZoom())}))}},o(document).on("jnews-ajax-load",(function(o,n){jnews.zoom.init()})),o(document).on("ready",(function(){jnews.zoom.init()}))}(jQuery);