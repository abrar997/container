(("undefined"!==typeof self?self:this).webpackChunkgumroad=("undefined"!==typeof self?self:this).webpackChunkgumroad||[]).push([[378],{11685:(t,e,i)=>{"use strict";var o,r,s=i(96989);o=[i(95040)],void 0===(r=function(t){return t((function(){this.updateCreatorProfileHeaderContent=function(t,e){$.ajax({type:"POST",dataType:"json",url:s.users_update_creator_profile_header_path(),data:e}).done(function(t){t.success?this.trigger("uiShowSavedCreatorProfileHeaderContent"):this.trigger("uiFailedToSaveCreatorProfileHeaderContent",t)}.bind(this))},this.after("initialize",(function(){this.on(document,"uiNeedsToUpdateCreatorProfileHeaderContent",this.updateCreatorProfileHeaderContent)}))}))}.apply(e,o))||(t.exports=r)},76520:(t,e,i)=>{"use strict";var o,r,s=i(96989);o=[i(95040),i(48845)],void 0===(r=function(t,e){return t((function(){this.defaultAttrs({uploadStartedEvent:"dataUploadingBackgroundStarted",uiUploadWithCorsEvent:"uiNeedsToUploadBackgroundWithCors",dataEvent:"dataBackground"}),this.getCustomizationModules=function(t,e){$.ajax({type:"GET",url:s.user_panel_path(e.username),dataType:"json"}).done(function(t){t.success&&this.trigger("dataCustomizationModules",t)}.bind(this))},this.after("initialize",(function(){this.on(document,"uiNeedsToGetCustomizationModules",this.getCustomizationModules)}))}),e)}.apply(e,o))||(t.exports=r)},31884:(t,e,i)=>{"use strict";i.r(e);var o=i(95040),r=i.n(o),s=i(96989);e.default=r()((function(){this.createPost=function(t,e){$.ajax({type:"POST",dataType:"json",url:s.post_path(),data:{post:e.post,link_id:e.permalink,should_send_preview:e.should_send_preview}}).done((t=>{t.success?(t.should_publish_after_save=e.should_publish_after_save,this.trigger("dataPostCreated",t)):this.trigger("dataPostCreateFailed",t)}))},this.updatePost=function(t,e){$.ajax({type:"POST",dataType:"json",url:s.update_post_path(e.id),data:{post:e.post,link_id:e.permalink,should_send_preview:e.should_send_preview}}).done((t=>{t.success?(t.should_publish_after_save=e.should_publish_after_save,this.trigger("dataPostUpdated",t)):this.trigger("dataPostFailedToUpdate",t)}))},this.publishPost=function(t,e){$.ajax({type:"POST",dataType:"json",url:s.publish_post_path(e.id)}).done((t=>{t.success?(t.should_publish_after_save=e.should_publish_after_save,this.trigger("dataPostPublished",t)):this.trigger("dataPostFailedToPublish")}))},this.previewPostEmail=function(t,e){$.ajax({type:"POST",dataType:"json",url:s.preview_post_path(e.id)}).done((t=>{t.success&&this.trigger("dataPostPreviewed",{id:e.id})}))},this.deletePost=function(t,e){$.ajax({type:"POST",dataType:"json",url:s.delete_post_path(e.id)}).done((t=>{t.success?this.trigger("dataPostDeleted",{id:e.id}):this.trigger("dataPostFailedToDelete")}))},this.undoPostDelete=function(t,e){$.ajax({type:"POST",dataType:"json",url:s.undo_post_delete_path(e.id)}).done((t=>{t.success?this.trigger("dataPostDeleteUndone",{html:t.html}):this.trigger("dataPostDeleteFailedToUndo")}))},this.createAndSchedulePost=function(t,e){$.ajax({type:"POST",dataType:"json",url:s.create_and_schedule_post_path(),data:{post:e.post,link_id:e.permalink,to_be_published_at:e.to_be_published_at}}).done((t=>{t.success?this.trigger("dataPostCreatedAndScheduled",t):this.trigger("dataPostFailedToSchedule",t)}))},this.updateAndSchedulePost=function(t,e){$.ajax({type:"POST",dataType:"json",url:s.schedule_post_path(e.id),data:{post:e.post,link_id:e.permalink,to_be_published_at:e.to_be_published_at}}).done((t=>{t.success?this.trigger("dataPostUpdatedAndScheduled",t):this.trigger("dataPostFailedToSchedule",t)}))},this.getRecipientCount=function(t,e){$.ajax({type:"GET",dataType:"json",url:s.post_updated_recipient_count_path(),data:e}).done((t=>{t.success?this.trigger("dataUpdatedRecipientCount",t):this.trigger("dataFailedToUpdateRecipientCount",t)}))},this.loadMorePosts=function(t,e){const i=e.currentPage+1;$.ajax({type:"GET",dataType:"json",url:s.all_posts_paginated_path(),data:{page:i,type:e.type},success:t=>{this.trigger("dataMorePostsLoaded",{page:i,postsHtml:t.html,showLoadMorePosts:t.can_paginate_further,type:e.type})},error:()=>{this.trigger("dataLoadMorePostsFailed")}})},this.searchPosts=function(t,e){$.ajax(s.posts_search_path(e),{type:"GET",dataType:"json"}).done((t=>{this.trigger("dataPostsSearchResult",{page:e.page,postsHtml:t.html,showLoadMorePosts:t.can_paginate_further,type:e.type})})).fail((()=>{this.trigger("uiNeedsToShowPostsSearchError")}))},this.after("initialize",(function(){this.on("uiNeedsToUpdatePost",this.updatePost),this.on("uiNeedsToCreatePost",this.createPost),this.on("uiNeedsToDeletePost",this.deletePost),this.on("uiNeedsToPublishPost",this.publishPost),this.on("uiNeedsToUndoPostDelete",this.undoPostDelete),this.on("uiNeedsToSendPreviewPostEmail",this.previewPostEmail),this.on("uiNeedsToCreateAndSchedulePost",this.createAndSchedulePost),this.on("uiNeedsToUpdateAndSchedulePost",this.updateAndSchedulePost),this.on("uiNeedsToUpdateRecipientCount",this.getRecipientCount),this.on("uiNeedsToLoadMorePosts",this.loadMorePosts),this.on("uiNeedsToSearchPosts",this.searchPosts)}))}))},86782:(t,e,i)=>{var o,r,s=i(96989);!function(){"use strict";o=[i(95040)],void 0===(r=function(t){return t((function(){this.getProductTags=function(t,e){var i=e.text;$.ajax({type:"GET",url:s.tags_path(),data:e}).done(function(t){this.trigger("dataProductTagList",{results:t,searchText:i})}.bind(this))},this.activateProfileTag=function(t,e){$.ajax({url:s.activate_profile_tag_path(e.id),type:"PATCH",dataType:"json"})},this.deactivateProfileTag=function(t,e){$.ajax({url:s.deactivate_profile_tag_path(e.id),type:"PATCH",dataType:"json"})},this.after("initialize",(function(){this.on("uiNeedsToGetProductTagList",this.getProductTags),this.on("uiNeedsToActivateProfileTag",this.activateProfileTag),this.on("uiNeedsToDeactivateProfileTag",this.deactivateProfileTag)}))}))}.apply(e,o))||(t.exports=r)}()},66602:(t,e,i)=>{"use strict";var o,r,s=i(96989);o=[i(95040),i(76068)],void 0===(r=function(t,{default:e}){return t((function(){this.defaultAttrs({uploadStartedEvent:"dataUploadingProfilePictureStarted",uiUploadWithCorsEvent:"uiNeedsToUploadProfilePictureWithCors",dataEvent:"dataProfilePicture"}),this.pullProfilePictureFromSNS=function(t,e){var i;"facebook"==e.type?i=s.profile_picture_from_facebook_path():"twitter"==e.type&&(i=s.profile_picture_from_twitter_path()),$.get(i,function(t){t&&t.picture_url?this.trigger("dataProfilePicture",t):this.trigger("dataFailedToPullProfilePicture")}.bind(this))},this.after("initialize",(function(){this.on(document,"uiNeedsToPullProfilePictureFromSNS",this.pullProfilePictureFromSNS)}))}),e)}.apply(e,o))||(t.exports=r)},793:(t,e,i)=>{"use strict";const{default:o}=i(29076),{default:r}=i(82060),s=i(73427),a=i(89570),l=i(69142),c=i(82933),n=i(56818),d=i(73395),u=i(38085),h=i(93816),p=i(8062),g=i(65186),f=i(69283),m=i(90273),P=i(76520),v=i(66602),{default:S}=i(82430),T=i(463),{default:y}=i(85161),{default:C}=i(43640),{default:b}=i(94516),_=i(23892),{default:w}=i(14804),{default:F}=i(85857),j=i(7200),k=i(86782),{default:x}=i(37619),N=i(11685),{default:E}=i(4115),{default:M}=i(85407),A=i(37123),D=i(13118),O=i(82493),{default:z}=i(31884),{default:V}=i(31255);var U,L,I,B;U=M.isOnMobile(),L=$(".js-creator-profile-wrapper").data("user-id"),I=$(".product:first-of-type").data("general-permalink"),B=$(".js-creator-profile-wrapper").data("is-owner"),o.initialize(),E.attachTo(document),S.attachTo(document),T.attachTo(document),y.attachTo(document),C.attachTo(document),b.attachTo(document),_.attachTo(document),w.attachTo(document),F.attachTo(document),j.attachTo(document),k.attachTo(document),x.attachTo(document),N.attachTo(document),P.attachTo(document),v.attachTo(document),n.attachTo(document,{isMobile:U}),c.attachTo(document),u.attachTo(document),m.attachTo(document),l.attachTo(".js-bundle-button",{onUserProfile:!0}),d.attachTo("#login"),g.attachTo(".js-picture-popover"),r.attachTo(".js-product-cards"),D.attachTo(".js-product-card-filters"),A.attachTo(".js-product-cards",{uiContext:"PROFILE",isProfileOwner:B,userId:L}),O.attachTo(".js-product-search-holder"),s.attachTo(".js-selected-product-overlay",{isMobile:U,onUserProfile:!0}),h.attachTo(".js-customization-modules-container",{permalink:I,isOwner:B}),p.attachTo(".js-customization-modules-form",{permalink:I}),a.attachTo(".js-creator-profile-header"),f.attachTo(".js-use-facebook-pic"),f.attachTo(".js-use-twitter-pic"),V.prototype.isCurrentPath("/posts")&&z.attachTo(document)},65186:(t,e,i)=>{"use strict";var o,r,s=i(96989);o=[i(95040),i(69337)],void 0===(r=function(t,e){return t((function(){this.defaultAttrs({uploadProfilePictureTriggerSelector:".js-upload-pic",uploadProfilePictureInputSelector:".js-profile-picture-input",formSelector:".js-form-holder",profilePictureBlobInputSelector:".js-profile-picture-blob-input",uploadStartedEvent:"dataUploadingProfilePictureStarted",uiUploadWithCorsEvent:"uiNeedsToUploadProfilePictureWithCors"}),this.showFileChooserForProfilePicture=function(t){t.preventDefault(),this.select("uploadProfilePictureInputSelector").click()},this.showUploading=function(){this.select("uploadProfilePictureTriggerSelector").text("...")},this.saveProfilePicture=function(t,e){let i="";e.picture_url?i=e.picture_url:(i=s.s3_utility_cdn_url_for_blob_path({key:e.blobKey}),this.select("profilePictureBlobInputSelector").val(e.signedBlobId)),this.trigger("uiNeedsToShowProfilePicture",{avatar_url:i}),this.select("uploadProfilePictureTriggerSelector").text(I18n.t("js.upload"))},this.after("initialize",(function(){this.on("click",{uploadProfilePictureTriggerSelector:this.showFileChooserForProfilePicture}),this.on("change",{uploadProfilePictureInputSelector:this.uploadFile}),this.on(document,"dataProfilePicture",this.saveProfilePicture),this.on(document,"dataUploadingProfilePictureStarted",this.showUploading)}))}),e)}.apply(e,o))||(t.exports=r)},69283:(t,e,i)=>{var o,r;o=[i(95040),i(80686)],void 0===(r=function(t,{default:e}){return t((function(){this.pullProfilePictureFromSNS=function(t){t.preventDefault();var e=this.$node.data("uid"),i=this.$node.data("type");return this.showLoadingText(),this.trigger("uiNeedsToPullProfilePictureFromSNS",{uid:e,type:i}),!1},this.setDefaultPullProfileImageText=function(){this.showDefaultText()},this.notifyFailure=function(){this.trigger("uiShowFlashMessage",{message:I18n.t("js.there_was_a_problem_updating_your_profile_image"),status:"error"})},this.after("initialize",(function(){this.on("click",this.pullProfilePictureFromSNS),this.on(document,"dataProfilePicture",this.setDefaultPullProfileImageText),this.on(document,"dataFailedToPullProfilePicture",this.setDefaultPullProfileImageText),this.on(document,"dataFailedToPullProfilePicture",this.notifyFailure)}))}),e)}.apply(e,o))||(t.exports=r)},93816:(t,e,i)=>{"use strict";var o,r;o=[i(95040),i(31255),i(50474)],void 0===(r=function(t,{default:e},i){return t((function(){this.defaultAttrs({popoverTriggerSelector:".js-popover-trigger",popoverSelector:".js-popover",displayedProductsPopoverSelector:".js-displayed-products-popover",displayedProductsPopoverTriggerSelector:".js-displayed-products-popover-trigger",stylePopoverSelector:".js-style-popover",stylePopoverTriggerSelector:".js-style-popover-trigger",picturePopoverSelector:".js-picture-popover",picturePopoverTriggerSelector:".js-picture-popover-trigger",connectionsPopoverSelector:".js-connections-popover",connectionsPopoverTriggerSelector:".js-connections-popover-trigger",followFormPopoverSelector:".js-follow-form-popover",followFormPopoverTriggerSelector:".js-follow-form-popover-trigger",previewEmbedContainerSelector:".js-embed-preview-container",copyEmbedFormTriggerSelector:".js-copy-embed-form-trigger",embedFormCodeSelector:".js-embed-form-code",embedFormContainerSelector:".js-embed-form-container",submitButtonSelector:".js-submit-button",editProductSelector:".js-preview-link",defaultSortSelectSelector:".js-default-sort-select",highlightedMembershipSelectSelector:".js-highlighted-membership-select",customizationModulesFormSelector:".js-customization-modules-form",featuredProductSortKey:"page_layout"}),this.setCustomizationModulesForm=function(t,e){e.cors_data&&this.select("customizationModulesFormSelector").data("cors",e.cors_data)},this.isNotAProfileTriggerSelector=function(t){const e=[this.attr.picturePopoverTriggerSelector,this.attr.followFormPopoverTriggerSelector,this.attr.displayedProductsPopoverTriggerSelector,this.attr.stylePopoverTriggerSelector,this.attr.connectionsPopoverTriggerSelector,this.attr.popoverSelector].map((t=>t.replace(".","")));for(let i=0;i<e.length;i++){const o=e[i];if(t.hasClass(o)||t.parents("ul#customization-ul").length)return!1}return!0},this.hideAllPopovers=function(t){const e=$(t.target);this.isNotAProfileTriggerSelector(e)&&(this.hidePicturePopover(),this.hideFollowFormPopover(),this.hideDisplayedProductsPopover(),this.hideStylePopover(),this.hideConnectionsPopover())},this.togglePopover=function(t,e){var i=e.hasClass("showing");this.select("popoverSelector").removeClass("showing"),this.select("popoverTriggerSelector").removeClass("active"),i||(e.addClass("showing"),t.addClass("active"))},this.hidePicturePopover=function(){this.select("picturePopoverTriggerSelector").removeClass("active"),this.select("picturePopoverSelector").removeClass("showing")},this.toggleDisplayedProductsPopover=function(t){t.preventDefault(),this.togglePopover(this.select("displayedProductsPopoverTriggerSelector"),this.select("displayedProductsPopoverSelector"))},this.hideDisplayedProductsPopover=function(){this.select("displayedProductsPopoverTriggerSelector").removeClass("active"),this.select("displayedProductsPopoverSelector").removeClass("showing")},this.togglePicturePopover=function(t){t.preventDefault(),this.togglePopover(this.select("picturePopoverTriggerSelector"),this.select("picturePopoverSelector"))},this.toggleStylePopover=function(t){t.preventDefault(),this.togglePopover(this.select("stylePopoverTriggerSelector"),this.select("stylePopoverSelector"))},this.hideStylePopover=function(){this.select("stylePopoverTriggerSelector").removeClass("active"),this.select("stylePopoverSelector").removeClass("showing")},this.toggleConnectionsPopover=function(t){t.preventDefault(),this.togglePopover(this.select("connectionsPopoverTriggerSelector"),this.select("connectionsPopoverSelector"))},this.hideConnectionsPopover=function(){this.select("connectionsPopoverTriggerSelector").removeClass("active"),this.select("connectionsPopoverSelector").removeClass("showing")},this.toggleFollowFormPopover=function(t){t.preventDefault(),this.togglePopover(this.select("followFormPopoverTriggerSelector"),this.select("followFormPopoverSelector"))},this.hideFollowFormPopover=function(t){t&&t.preventDefault();var e=this.select("followFormPopoverSelector");e.hasClass("showing")&&this.togglePopover(e,this.select("followFormPopoverSelector"))},this.copyEmbedFormCode=function(t){t.preventDefault()},this.updateEmbedFormCode=function(){this.select("embedFormCodeSelector").text(this.select("embedFormContainerSelector").html().trim().replace(/div/g,"form"))},this.submitCustomizationModulesForm=function(t){t.preventDefault(),this.select("submitButtonSelector").text(I18n.t("js.saving"));let e=this.select("customizationModulesFormSelector").serialize();this.trigger("uiNeedsToSaveFollowPageContent"),this.trigger("uiNeedsToSaveCreatorProfileHeaderContent"),this.trigger("uiNeedsToUpdateUserSettings",{serializedFormData:e,url:this.select("customizationModulesFormSelector").attr("action")}),this.trigger("uiShouldHideFollowFormPopover"),this.trigger("uiNeedsToSaveProductVisibilities"),this.trigger("uiNeedsToSaveTagVisibilities"),this.select("defaultSortSelectSelector").val()===this.attr.featuredProductSortKey&&this.trigger("uiNeedsToSaveGridLayout")},this.showChangesSaved=function(t,e){this.trigger("uiShowFlashMessage",{message:I18n.t("js.changes_saved"),status:"success"}),this.setFormSubmitButtonToDefault()},this.setFormSubmitButtonToDefault=function(){this.select("submitButtonSelector").text(I18n.t("js.save_changes_prompt"))},this.showErrorFlashMessage=function(t,e){e&&e.error_message?this.trigger("uiShowFlashMessage",{message:e.error_message,status:"error"}):this.trigger("uiShowFlashMessage",{message:I18n.t("js.something_went_wrong"),status:"error"})},this.handleSortSelectFilter=function(){var t=this.select("defaultSortSelectSelector").val();this.trigger("uiToUpdateSortFilter",{value:t}),this.trigger("uiToToggleSorting",{enabled:t===this.attr.featuredProductSortKey})},this.updateMembershipTabPreview=function(){const t=this.select("highlightedMembershipSelectSelector").val();this.trigger(document,"uiToggleMembershipTabVisibility",{visible:"off"!==t})},this.after("initialize",(function(){this.on(document,"click",this.hideAllPopovers),this.on(document,"dataCustomizationModules",this.setCustomizationModulesForm),this.on(document,"dataProfilePicture",this.hidePicturePopover),this.on(document,"uiShouldHideFollowFormPopover",this.hideFollowFormPopover),this.on(document,"dataUserSettings",this.showChangesSaved),this.on(document,"dataFailedToUpdateUserSettings",this.setFormSubmitButtonToDefault),this.on(document,"dataFailedToUpdateUserSettings",this.showErrorFlashMessage),this.on("click",{picturePopoverTriggerSelector:this.togglePicturePopover,stylePopoverTriggerSelector:this.toggleStylePopover,displayedProductsPopoverTriggerSelector:this.toggleDisplayedProductsPopover,connectionsPopoverTriggerSelector:this.toggleConnectionsPopover,followFormPopoverTriggerSelector:this.toggleFollowFormPopover,copyEmbedFormTriggerSelector:this.copyEmbedFormCode,submitButtonSelector:this.submitCustomizationModulesForm}),this.on("change",{defaultSortSelectSelector:this.handleSortSelectFilter,highlightedMembershipSelectSelector:this.updateMembershipTabPreview}),this.on("submit",{customizationModulesFormSelector:this.submitCustomizationModulesForm}),this.attr.isOwner&&(this.trigger("uiToToggleSorting",{enabled:this.select("defaultSortSelectSelector").val()===this.attr.featuredProductSortKey}),i.hookClipboard(this.select("copyEmbedFormTriggerSelector")),this.updateEmbedFormCode())}))}))}.apply(e,o))||(t.exports=r)},8062:(t,e,i)=>{"use strict";var o,r;o=[i(95040)],void 0===(r=function(t){return t((function(){this.defaultAttrs({cssPreviewSelector:'.js-custom-style[data-component="custom_css"]',cssPreviewTriggerSelector:".js-custom-css-preview-trigger",cssResetTriggerSelector:".js-custom-css-reset-trigger",cssTextareaSelector:".js-custom-css",colorInputSelector:".js-color-input"}),this.previewCustomCss=function(t){t&&t.preventDefault(),$("head").find(this.attr.cssPreviewSelector).text(this.select("cssTextareaSelector").val())},this.resetCustomCss=function(t){t&&t.preventDefault();var e=this.select("cssTextareaSelector").data("css");this.select("cssTextareaSelector").val(e),this.attr.$customCssTag.text(e)},this.setStyle=function(){this.attr.$customCssTag=$("head").find(this.attr.cssPreviewSelector)},this.showStylePreview=function(t,e){$("style").filter('.js-custom-style[data-component="'+e.component+'"]').text(e.css)},this.setColor=function(t){this.trigger("uiNeedsToPreviewStyleComponent",{component:this.select("colorInputSelector").data("style-component"),color:t.target.value})},this.showChangesSaved=function(){this.previewCustomCss(),this.select("cssTextareaSelector").data("css",this.select("cssTextareaSelector").val())},this.after("initialize",(function(){this.setStyle(),this.on("click",{cssPreviewTriggerSelector:this.previewCustomCss,cssResetTriggerSelector:this.resetCustomCss}),this.on("input",{colorInputSelector:this.setColor}),this.on(document,"dataUserSettings",this.showChangesSaved),this.on(document,"dataStyleComponentPreview",this.showStylePreview)}))}))}.apply(e,o))||(t.exports=r)},38085:(t,e,i)=>{"use strict";var o,r;o=[i(95040)],void 0===(r=function(t){return t((function(){this.defaultAttrs({linkSelector:"a",buttonSelector:"button",friendSelector:".friend"}),this.trackClick=function(t){this.attr.friend.clicks.push({type:t.target.nodeName.toLowerCase(),id:t.target.id,class:t.target.className,timestamp:t.timeStamp})},this.trackKeyPress=function(t){var e,i=t.target,o=$(i);(o.hasClass("cc_number")||o.hasClass("cv_code")||o.hasClass("expiry_date"))&&t.which>47&&t.which<58&&(e=48),this.attr.friend.keys.push({type:i.nodeName.toLowerCase(),id:i.id,length:i.value?i.value.length:"",class:i.className,key:e||t.keyCode||t.which,timestamp:t.timeStamp})},this.setFriendValue=function(){this.select("friendSelector").val(JSON.stringify(this.attr.friend))},this.after("initialize",(function(){this.attr.friend={start:(new Date).getTime(),keys:[],movements:[],clicks:[]},this.on("click",{linkSelector:this.trackClick,buttonSelector:this.trackClick}),this.on("keypress",this.trackKeyPress),this.on(document,"uiSetFriendValue",this.setFriendValue)}))}))}.apply(e,o))||(t.exports=r)},82493:(t,e,i)=>{"use strict";const o=i(95040),{ProductCardClassNames:r,ProductCardFetchTypes:s}=i(3290);t.exports=o((function(){this.defaultAttrs({searchFieldSelector:".js-search-products-input",enterKeyCode:13}),this.searchKeyListener=function(t){if(t.preventDefault(),t.keyCode===this.attr.enterKeyCode){const t=this.select("searchFieldSelector").val();this.trigger("uiNeedsToFetchNewResults",{fetchType:s.SEARCH,query:t}),this.select("searchFieldSelector").select()}},this.enableSearch=function(){this.$node.removeClass(r.HIDDEN),this.select("searchFieldSelector").removeAttr("disabled")},this.disableSearch=function(){this.select("searchFieldSelector").attr("disabled","disabled")},this.updateSearchField=function(t,e){this.select("searchFieldSelector").val(e.query),this.select("searchFieldSelector").select()},this.after("initialize",(function(){this.on("keyup",{searchFieldSelector:this.searchKeyListener}),this.on(document,"uiToEnableSearch",this.enableSearch),this.on(document,"uiToDisableSearch",this.disableSearch),this.on(document,"uiToUpdateSearchField",this.updateSearchField)}))}))},73427:(t,e,i)=>{var o,r;!function(){"use strict";o=[i(95040),i(85069)],void 0===(r=function(t,e){return t((function(){this.defaultAttrs({productContainerSelector:".product-row",productSelector:".product",backgroundSelector:".js-background"}),this.showSkeletonProductOverlay=function(){this.select("productContainerSelector").remove(),this.$node.append($("<div class='product-row'>").html($("<div class='faux-product--skeleton'>"))),this.select("productSelector").addClass("relative popped"),this.$node.addClass("showing"),setTimeout(function(){this.select("productContainerSelector").addClass("showing")}.bind(this),10)},this.showProductOverlay=function(t,i){this.select("productContainerSelector").remove(),this.$node.append(i.productNode),this.select("productContainerSelector").addClass("showing"),this.select("productSelector").addClass("relative popped"),e.attachTo(this.select("productContainerSelector"),{incrementViewCountOnInit:!0,isMobile:this.attr.isMobile,isMultiBuyEnabled:!0,onUserProfile:this.attr.onUserProfile,onDiscoverPage:this.attr.onDiscoverPage,recommendedBy:i.recommendedBy,quickAddToCart:i.quickAddToCart})},this.hideProductAndProductOverlay=function(){this.select("productContainerSelector").addClass("not-showing"),this.$node.removeClass("showing"),setTimeout(function(){this.hideProductOverlay()}.bind(this),300)},this.hideProductOverlay=function(t){t&&t.preventDefault(),history.replaceState(null,null," "),this.select("productSelector").remove(),this.$node.removeClass("showing")},this.hideProductAndProductOverlayIfEsc=function(t,e){27===t.keyCode&&this.hideProductAndProductOverlay()},this.after("initialize",(function(){this.on(document,"uiNeedsToShowSkeletonProductInOverlay",this.showSkeletonProductOverlay),this.on(document,"uiNeedsToShowSelectedProductInOverlay",this.showProductOverlay),this.on(document,"uiNeedsToHideProductOverlay",this.hideProductOverlay),this.on("click",{backgroundSelector:this.hideProductAndProductOverlay}),this.on(document,"keydown",this.hideProductAndProductOverlayIfEsc)}))}))}.apply(e,o))||(t.exports=r)}()},82933:(t,e,i)=>{var o,r;!function(){"use strict";o=[i(95040),i(41364)],void 0===(r=function(t,{default:e}){return t((function(){this.defaultAttrs({creatorProfileHeaderSelector:".js-creator-header",membershipTabLinkSelector:".js-membership-tab-link"}),this.toggleEmptyProductsClass=function(t,e){e.empty?this.select("creatorProfileHeaderSelector").hide():this.select("creatorProfileHeaderSelector").show()},this.toggleMembershipLink=function(t,e){e.visible?this.select("membershipTabLinkSelector").removeClass("hidden").show():this.select("membershipTabLinkSelector").addClass("hidden").hide()},this.after("initialize",(function(){this.on(document,"uiToToggleEmptyProductsClass",this.toggleEmptyProductsClass),this.on(document,"uiToggleMembershipTabVisibility",this.toggleMembershipLink)}))}),e)}.apply(e,o))||(t.exports=r)}()},56818:(t,e,i)=>{var o,r;!function(){"use strict";o=[i(95040),i(41728),i(41364),i(51474),i(47284),i(34635)],void 0===(r=function(t,e,{default:i},{default:o},r){return t((function(){this.defaultAttrs({pageWrapperSelector:".js-wrapper",profileWrapperSelector:".js-creator-profile-wrapper",gridSelector:".js-creator-profile",productCardWrapper:".js-product-card-wrapper",productCardFilterContainerSelector:".js-product-card-filters",productList:".js-product-card-holder",reorderHandleSelector:".js-reorder-handle",sortableGhostClass:"sortable-ghost",loadingIndicatorSelector:".js-loading-indicator",panelContainerSelector:".js-customization-modules-container",productSelector:".js-product",productCardFilterSortSelector:".js-product-card-sort-by",quickAddToCartTriggerSelector:".js-quick-add-to-cart-trigger",productVisibilitySelector:".js-product-shown-on-profile",productFiltersVisibilitySelector:".js-hide-product-filters-on-profile",tagVisibilitySelector:".js-profile-tag-option",tagFiltersWrapperSelector:".js-filter-tags",tagFilterListSelector:".js-product-card-filter-tag-list",tagFilterSelector:".js-product-card-filter-tag",profileCardSelector:".js-creator-profile-card",productCardSelector:".js-product-card",wrapperSelector:".js-wrapper",productsInfoSelector:".js-paged-products-info",madeSaleSinceVisit:!1,scrollIsLocked:!1,visibilityToggledProducts:[]}),this.addProductCardByPermalink=function(t){if(!(this.getProductCardByPermalink(t).length>0)){var e=this.savedProductCards[t];this.trigger("uiToAdjustResultCount",{increment:!0}),e?(this.select("gridSelector").append($(e)),delete this.savedProductCards[t]):this.trigger(document,"uiNeedsAProductCard",{permalink:t,show_creator:!1})}},this.removeProductCardByPermalink=function(t){var e=this.getProductCardByPermalink(t);0!==e.length&&(this.savedProductCards[t]=this.asHTML(e),e.remove(),this.trigger("uiToAdjustResultCount",{increment:!1}))},this.asHTML=function(t){var e=$("<div>").html(t.clone()),i=e.html();return e.remove(),i},this.addProductsToGrid=function(t,i){i&&i.html&&$(i.html).each(function(t,i){var o=$(i);this.select("gridSelector").append(this.asHTML(o));const r=$(i).data("permalink"),s=this.getProductCardByPermalink(r);e.attachTo(s,{overlayTriggerSelector:s.find(this.attr.productSelector),skipOverlayTriggerSelector:s.find(this.attr.quickAddToCartTriggerSelector)})}.bind(this))},this.getProductCardByPermalink=function(t){return this.select("productCardSelector").filter("[data-permalink="+t+"]")},this.getProductByPermalink=function(t){return this.select("productSelector").filter("[data-unique-permalink="+t+"]")},this.addTagFilter=function(t){if(this.getTagFilter(t).length>0)return;const e=this.savedTagFilters[t];if(e)this.select("tagFilterListSelector").append($(e));else{let e=this.getTagFilterOption(t).data("name");this.select("tagFilterListSelector").append(r({tag_name:e,profile_tag_id:t}))}delete this.savedTagFilters[t]},this.removeTagFilter=function(t){var e=this.getTagFilter(t);e.length&&(this.savedTagFilters[t]=this.asHTML(e),e.remove())},this.getTagFilter=function(t){return this.select("tagFilterSelector").filter(`[data-id=${t}]`)},this.getTagFilterOption=function(t){return this.select("tagVisibilitySelector").filter(`[data-id=${t}]`)},this.toggleTagVisibility=function(t,e){let i=$(t.target||t.srcElement),o=i.data("id");i.prop("checked")?this.addTagFilter(o):this.removeTagFilter(o),this.select("tagFiltersWrapperSelector").toggleClass("soft-hidden",this.select("tagFilterSelector").length-1===0)},this.toggleProductFiltersVisibility=function(t,e){$(t.target||t.srcElement).prop("checked")?(this.select("productCardWrapper").removeClass("with-no-filters"),this.select("productCardFilterContainerSelector").removeClass("hidden")):(this.select("productCardWrapper").addClass("with-no-filters"),this.select("productCardFilterContainerSelector").addClass("hidden"))},this.isEditable=function(){return this.attr.isOwner&&!this.attr.isMobile},this.openOverlayIfPermalinkParamExists=function(){var t=window.location.hash.substring(1);t.length>0&&this.getProductByPermalink(t).click()},this.setupGrid=function(){this.select("gridSelector").addClass("product-grid"),setTimeout(function(){this.select("gridSelector").fadeIn(),this.setupSortableList(),this.openOverlayIfPermalinkParamExists()}.bind(this))},this.setupSortableList=function(){var t=this.select("productList").get(0);"undefined"!==typeof t&&this.isEditable()&&new o(t,{handle:this.attr.reorderHandleSelector,ghostClass:this.attr.sortableGhostClass})},this.savePageLayout=function(){if(this.isEditable()){var t=[];this.select("productCardSelector").each((function(){t.push($(this).data("permalink"))})),this.trigger(document,"uiNeedsToSavePageLayout",{order:t})}},this.toggleSorting=function(t,e){this.select("gridSelector").toggleClass("sortable",e.enabled)},this.toggleProductVisibility=function(t,e){let i;i=e&&e.element?e.element:$(t.target||t.srcElement);const o=i.data("permalink");"change"===t.type&&-1===this.attr.visibilityToggledProducts.indexOf(o)&&this.attr.visibilityToggledProducts.push(o),i.prop("checked")?this.addProductCardByPermalink(o):this.removeProductCardByPermalink(o),this.select("productVisibilitySelector").filter(":checked").length?(this.toggleEmptyProductsClass({},{empty:!1}),this.select("profileCardSelector").addClass("creator-profile-card"),this.select("footerSelector").removeClass("absolutely-positioned"),this.trigger("uiToToggleFilterVisibility",{show:!0})):(this.toggleEmptyProductsClass({},{empty:!0}),this.select("footerSelector").addClass("absolutely-positioned"),this.trigger("uiToToggleFilterVisibility",{show:!1}))},this.toggleEmptyProductsClass=function(t,e){e.empty?this.select("pageWrapperSelector").addClass("vertically-center"):this.select("pageWrapperSelector").removeClass("vertically-center")},this.saveProductVisibilities=function(){var t=this,e=[];this.select("productVisibilitySelector").each((function(){var i=$(this).data("permalink");t.attr.visibilityToggledProducts.indexOf(i)>-1&&e.push({permalink:$(this).data("permalink"),shown_on_profile:$(this).prop("checked")?"on":"off"})})),e.length>0&&(this.trigger("uiNeedsToUpdateProfileVisibilities",{formData:e}),this.attr.visibilityToggledProducts=[])},this.saveTagVisibilities=function(){var t=this;this.select("tagVisibilitySelector").each((function(){let e=$(this).data("id");t.savedTagFilters[e];$(this).prop("checked")?t.trigger("uiNeedsToActivateProfileTag",{id:e}):t.trigger("uiNeedsToDeactivateProfileTag",{id:e})}))},this.initializeProductVisibilities=function(){var t=this;this.select("productVisibilitySelector").each((function(){t.toggleProductVisibility({},{element:$(this)})}))},this.showProfileHeader=function(){setTimeout(function(){this.select("profileCardSelector").removeClass("hidden")}.bind(this),200)},this.after("initialize",(function(){this.attr.totalPages=this.select("profileWrapperSelector").data("total-pages"),this.attr.userName=this.select("profileWrapperSelector").data("username"),this.attr.userId=this.select("profileWrapperSelector").data("user-id"),this.attr.isOwner=this.select("profileWrapperSelector").data("is-owner"),this.savedProductCards={},this.savedTagFilters={},this.showProfileHeader(),this.on(document,"dataGotAProductCardForGrid",this.addProductsToGrid),this.on(document,"uiToToggleSorting",this.toggleSorting),this.on(document,"uiNeedsToSaveGridLayout",this.savePageLayout),this.on(document,"uiToShowProfileHeader",this.showProfileHeader),this.on(document,"uiToToggleEmptyProductsClass",this.toggleEmptyProductsClass),this.on(document,"uiNeedsToSaveProductVisibilities",this.saveProductVisibilities),this.on(document,"uiNeedsToSaveTagVisibilities",this.saveTagVisibilities),this.on("change",{productVisibilitySelector:this.toggleProductVisibility}),this.on("change",{tagVisibilitySelector:this.toggleTagVisibility}),this.on("change",{productFiltersVisibilitySelector:this.toggleProductFiltersVisibility}),this.on(document,"uiToSetupDynamicGrid",this.setupGrid),this.on(document,"uiToInitializeProductVisibilities",this.initializeProductVisibilities)}))}),i)}.apply(e,o))||(t.exports=r)}()},89570:(t,e,i)=>{"use strict";var o,r;o=[i(95040),i(41364),i(92197),i(9270)],void 0===(r=function(t,{default:e},{default:i}){return t((function(){this.defaultAttrs({imageSelector:".js-profile-picture",creatorNameSelector:".js-creator-name",creatorBioSelector:".js-creator-bio",creatorProfilePictureSelector:".js-profile-picture"}),this.saveContent=function(){this.trigger("uiNeedsToUpdateCreatorProfileHeaderContent",{name:this.select("creatorNameSelector").text(),bio:this.select("creatorBioSelector").html()})},this.showProfilePicture=function(t,e){this.select("creatorProfilePictureSelector")[0].style.backgroundImage=`url("${e.avatar_url}")`},this.cleanContent=function(){-1==navigator.userAgent.toLowerCase().indexOf("firefox")&&(this.select("creatorNameSelector").html(this.select("creatorNameSelector").text()),this.select("creatorBioSelector").html(this.select("creatorBioSelector").text()))},this.showEditing=function(){this.$node.find('[data-default-contenteditable="true"]').attr("contenteditable","true")},this.showFailedToSave=function(t,e){this.trigger("uiShowFlashMessage",{message:e.error_message,status:"error"})},this.after("initialize",(function(){this.select("creatorNameSelector").attr("contenteditable")&&this.$node.contentEditable().change(function(t){"update"==t.action&&this.cleanContent()}.bind(this)),this.on(document,"uiFailedToSaveCreatorProfileHeaderContent",this.showFailedToSave),this.on(document,"uiNeedsToSaveCreatorProfileHeaderContent",this.saveContent),this.on(document,"uiNeedsToShowProfilePicture",this.showProfilePicture),this.on(document,"uiShouldShowEditing",this.showEditing)}))}),e,i)}.apply(e,o))||(t.exports=r)},82060:(t,e,i)=>{"use strict";i.r(e);var o=i(95040),r=i.n(o);e.default=r()((function(){this.defaultAttrs({productSelector:".js-product"}),this.trackProfileConversion=function(t,e){!this.attr.madeSaleSinceVisit&&e.id&&(this.attr.madeSaleSinceVisit=!0,this.trigger("uiNeedsToTrackProductSpecificEvent",{name:"first_purchase_on_profile_visit",permalink:e.permalink}))},this.after("initialize",(function(){this.on(document,"uiBundledProductPaymentCompleted",this.trackProfileConversion)}))}))},47284:(t,e,i)=>{var o=i(40202);t.exports=(o.default||o).template({compiler:[8,">= 4.3.0"],main:function(t,e,i,o,r){var s,a=null!=e?e:t.nullContext||{},l=t.hooks.helperMissing,c="function",n=t.escapeExpression,d=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="filter-tag js-product-card-filter-tag" data-id="'+n(typeof(s=null!=(s=d(i,"profile_tag_id")||(null!=e?d(e,"profile_tag_id"):e))?s:l)===c?s.call(a,{name:"profile_tag_id",hash:{},data:r,loc:{start:{line:1,column:60},end:{line:1,column:80}}}):s)+'" data-name="'+n(typeof(s=null!=(s=d(i,"tag_name")||(null!=e?d(e,"tag_name"):e))?s:l)===c?s.call(a,{name:"tag_name",hash:{},data:r,loc:{start:{line:1,column:93},end:{line:1,column:107}}}):s)+'">\n\t<input name="js-product-card-filter-tag-input" type="checkbox" id="tag_'+n(typeof(s=null!=(s=d(i,"profile_tag_id")||(null!=e?d(e,"profile_tag_id"):e))?s:l)===c?s.call(a,{name:"profile_tag_id",hash:{},data:r,loc:{start:{line:2,column:72},end:{line:2,column:92}}}):s)+'" data-name="'+n(typeof(s=null!=(s=d(i,"tag_name")||(null!=e?d(e,"tag_name"):e))?s:l)===c?s.call(a,{name:"tag_name",hash:{},data:r,loc:{start:{line:2,column:105},end:{line:2,column:119}}}):s)+'">\n\t<label class="for-checkbox" for="tag_'+n(typeof(s=null!=(s=d(i,"profile_tag_id")||(null!=e?d(e,"profile_tag_id"):e))?s:l)===c?s.call(a,{name:"profile_tag_id",hash:{},data:r,loc:{start:{line:3,column:38},end:{line:3,column:58}}}):s)+'">\n\t  '+n(typeof(s=null!=(s=d(i,"tag_name")||(null!=e?d(e,"tag_name"):e))?s:l)===c?s.call(a,{name:"tag_name",hash:{},data:r,loc:{start:{line:4,column:3},end:{line:4,column:17}}}):s)+"\n\t</label>\n</div>\n"},useData:!0})},9270:()=>{!function(t){var e={init:function(e){return this.each((function(){var e=t(this);e.unbind("change"),e.find("[contenteditable]").each((function(){t(this).contentEditable("field",e)}))}))},field:function(e){return this.each((function(){var i=t(this),o=i.attr("data-key");i.on("focus",(function(){var e=t(this);return e.data("enter",e.html()),e.data("before",e.html()),e})).on("keyup paste",(function(){var i=t(this),r=i.html();if(i.data("before")!==r){i.data("before",r);var s={};s[o]=r,e.trigger({type:"change",action:"update",changed:s})}return i})).on("blur",(function(){var i=t(this),r=i.html();if(i.data("enter")!==r){i.data("enter",r);var s={};s[o]=r,e.trigger({type:"change",action:"save",changed:s})}return i}))}))}};t.fn.contentEditable=function(i){return e[i]?e[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==typeof i&&i?void t.error("Method "+i+" does not exist on jQuery.contentEditable"):e.init.apply(this,arguments)}}(jQuery)}},t=>{t.O(0,[8782],(()=>{return e=793,t(t.s=e);var e}));t.O()}]);