(self.webpackJsonp=self.webpackJsonp||[]).push([[37],{3177:function(e,t){},3587:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),r=n(2),o=n(4),l=n(886);const c=({uri:e,workspaceSlug:t,projectSlug:n,pause:c})=>{const[{data:s,error:d}]=Object(r.vb)({variables:{uri:e,workspaceSlug:t,projectSlug:n},pause:c}),[i,p]=Object(a.useState)([]),[m,u]=Object(a.useState)(),g=null==s?void 0:s.branchNodes[0],h=d||m,{actions:b}=Object(o.b)();return Object(a.useEffect)(()=>{g&&l.a.executeQuery(r.l,{branchNodeId:g.id,maxDepth:20}).then(({data:e,error:t})=>{var n,a;20===(null===(a=null===(n=null==e?void 0:e.sl_sl_node_edges_aggregate.aggregate)||void 0===n?void 0:n.max)||void 0===a?void 0:a.depth)&&b.reporter.log({event:"changelog_max_depth_reached",payload:{branch_node_id:g.id}});const r=null==e?void 0:e.sl_sl_node_edges.reduce((e,t)=>e.concat(t.toBranchNode.changes),[]);p([...g.changes,...r||[]]),u(t)})},[g,b]),{changes:h?void 0:i,error:h}}},3589:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(1),r=n(0),o=n(156),l=n(2),c=n(4);const s=({workspaceSlug:e,projectSlug:t,nodeUri:n,branchSlug:a,token:r,deref:l})=>{const{state:s}=Object(c.b)(),d=new o(s.router.appUrl).segment(["api","v1","projects",e,t,"nodes"+n]).addQuery({branch:a,deref:l});return r&&d.addQuery({token:r}),d.toString()},d=({className:e,workspaceSlug:t,projectSlug:n,branchSlug:o,nodeUri:d})=>{const{actions:i}=Object(c.b)(),[{data:p,fetching:m,error:u}]=Object(l.Nb)({pause:!d||!t||!n,requestPolicy:"network-only",variables:{nodeUri:d,projectSlug:n,workspaceSlug:t,branchSlug:o}});u&&console.log("error generating token for export url",u);const g=null==p?void 0:p.getBranchNodeAccessToken.token,h=s({workspaceSlug:t,projectSlug:n,nodeUri:d,branchSlug:o,token:g}),b=s({workspaceSlug:t,projectSlug:n,nodeUri:d,branchSlug:o,token:g,deref:"optimizedBundle"}),f=s({workspaceSlug:t,projectSlug:n,nodeUri:d,branchSlug:o,token:g,deref:"all"});return r.createElement(a.y,{"aria-label":"Export document",placement:"top right",renderTrigger:r.createElement(a.e,{size:"sm",className:e,icon:["fas","wand-magic"],"data-test":"export-btn",onClick:()=>{i.reporter.log({event:"button_clicked",payload:{name:"export",location:"explorer_node_panel"}})}},"Export"),items:[{id:"export-original-btn",href:h,isDisabled:!g&&m,title:"Original",onPress:()=>{i.reporter.log({event:"explorer_node_exported",payload:{export_type:"original"}})}},{id:"export-bundled-btn",href:b,isDisabled:!g&&m,title:"Bundled References",onPress:()=>{i.reporter.log({event:"explorer_node_exported",payload:{export_type:"referenced"}})}},{id:"export-dereferenced-btn",href:f,isDisabled:!g&&m,title:"Fully Dereferenced",onPress:()=>{i.reporter.log({event:"explorer_node_exported",payload:{export_type:"dereferenced"}})}}]})}},3590:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(3181),r=n(3180),o=n(0),l=n(2),c=n(4);const s=({nodeType:e,nodeUri:t,nodeData:n,workspaceSlug:s,projectSlug:d,branchSlug:i})=>{const{actions:p}=Object(c.b)(),m=e===l.w.HttpOperation,[{data:u}]=Object(l.Ob)({variables:{uri:t,workspaceSlug:s,projectSlug:d,branchSlug:i},pause:!m}),g=Object(r.useDereferencedData)(e,n);return m?o.createElement("div",{className:"overflow-auto"},o.createElement("div",{style:{minWidth:"500px"}},o.createElement(a.TryIt,{onRequestSent:({mockingEnabled:e})=>{p.reporter.log({event:"try_it_request_sent",payload:{mocking_enabled:e}})},onResponseReceived:({mockingEnabled:e,responseStatus:t})=>{p.reporter.log({event:"try_it_response_received",payload:{mocking_enabled:e,response_status:t}})},nodeType:e,nodeData:g,mockUrl:null==u?void 0:u.branchNodeMockUrl.servicePath}))):null}},3632:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(3),r=n(5),o=n.n(r),l=n(0),c=n(9);const s=l.memo(({className:e,padding:t,changes:n})=>{if(!n||!n.length)return l.createElement("div",{className:o()(e,a.Classes.TEXT_MUTED,t&&"p-"+t)},"No changes for this resource.");const r=Object(c.orderBy)(n,[e=>new Date(e.createdAt).getTime()],["desc"]),s=Object(c.groupBy)(r,e=>new Date(e.createdAt).toDateString());return l.createElement("div",{className:o()("Changelog",e,t&&"p-"+t)},Object.keys(s).map((e,t)=>l.createElement("div",{key:e,className:o()({"mt-6":t>0})},l.createElement("div",{className:"p-2 font-medium Changelog__date"},e),s[e].map((e,t)=>l.createElement("div",{key:t,className:o()("Changelog__item","p-2 border-b border-gray-2 dark:border-lighten-3")},l.createElement("div",{className:"flex text-sm"},l.createElement("div",{className:"flex-1 mr-3 Changelog__message"},e.message),l.createElement("div",{className:"font-semibold lowercase Changelog__semver"},e.semver)))))))});var d=n(3587);function i(e){const{changes:t,error:n}=Object(d.a)({uri:e.uri,projectSlug:e.projectSlug,workspaceSlug:e.workspaceSlug});return n?l.createElement("div",{className:o()("flex items-center justify-center w-full")},l.createElement(a.NonIdealState,{title:"Something went wrong",description:n.message.replace("[GraphQL]",""),icon:l.createElement(a.FAIcon,{icon:["fad","exclamation-triangle"]})})):l.createElement(s,{changes:t})}},4325:function(e,t,n){"use strict";n.r(t);var a=n(16),r=n(1438),o=n(1437),l=n(637),c=n(640),s=n(87),d=n(296),i=n(25),p=n(3),m=n(9),u=n(0),g=n(143),h=n.n(g),b=n(3632),f=n(2),v=n(157),N=n(442),E=n(4),y=n(5),S=n.n(y),j=n(13),w=n(884),k=n(55),T=n(635),x=n(40),I=n(3190),O=n(878);const _=Object.freeze([i.NodeType.Generic,i.NodeType.Unknown].map(String));function B(e){return _.includes(e)}const C=e=>{var{projectId:t,branchSlug:n,edge:r,direction:o}=e,l=Object(x.__rest)(e,["projectId","branchSlug","edge","direction"]);const c=r&&r[o+"BranchNodeName"],i=r&&r[o+"BranchNodeUri"],m=r&&r[o+"BranchNodeType"],g=r&&r[o+"BranchNodeVersion"],h=r&&r[o+"BranchNode"].nodeId,b=!B(m),f=h?Object(v.b)("prj",h):"",N=Object(v.b)("prj",t),{state:{elementsOptIn:{shouldShowElementsV7:y}}}=Object(E.b)(),{data:S}=Object(d.d)({nodeSlug:f,projectId:N,branchSlug:n});return u.createElement(p.Dialog,Object.assign({},l,{isOpen:!!r,title:u.createElement("div",{className:"flex items-center mr-2"},u.createElement("div",{className:"flex-1 flex mx-2 items-center"},c," ","0.0"!==g&&u.createElement("span",{className:"mx-2 text-base text-gray-6"},"v",g)),b&&u.createElement(a.a,{className:"text-base",to:"."+i},"Go to ref")),icon:u.createElement(w.a,{size:"lg",icon:j.k[m],className:"text-"+j.j[m]}),style:{width:800,height:500}}),u.createElement("div",{className:"h-full"},u.createElement(O.ScrollContainer,null,y?u.createElement(s.a,{className:"sl-p-4",nodeData:null==S?void 0:S.data,nodeType:m,key:f,layoutOptions:{hideTryItPanel:!0,noHeading:!0,hideModelExamples:!0},useNodeForRefResolving:!0}):u.createElement(I.Docs,{className:"p-10",node:i}))))},D=u.memo(({edges:e,nodeType:t,className:n,projectSlug:a,projectId:r,branchSlug:o})=>{var l,c,s,d,g,h,b,f;const v=Object(m.groupBy)(Object(m.uniqBy)(e,"fromBranchNodeId"),"fromBranchNodeType"),N=e.length?Object(m.findKey)(v,e=>null==e?void 0:e.length):void 0,[E,y]=u.useState(),k=u.useCallback((e,t,n)=>{n.preventDefault(),n.stopPropagation(),y(e)},[y]);return u.createElement("div",{className:S()(n,"InboundDependencies")},u.createElement(p.Tabs,{id:"InboundDependencies-tabs",className:"border rounded dark:border-darken-3",selectedTabId:null!=E?E:"InboundDependencies-"+N,onChange:k,renderActiveTabPanelOnly:!0,vertical:!0},u.createElement(p.Tab,{id:"InboundDependencies-"+i.NodeType.Model,title:u.createElement("div",{className:"flex items-center"},u.createElement(w.a,{className:"mr-2",fixedWidth:!0,icon:j.k[i.NodeType.Model]}),j.m[i.NodeType.Model],"s (",(null===(l=v[i.NodeType.Model])||void 0===l?void 0:l.length)||0,")"),panel:(null===(c=v[i.NodeType.Model])||void 0===c?void 0:c.length)?u.createElement(P,{projectId:r,branchSlug:o,projectSlug:a,className:"InboundDependencies__DependencyTable",edges:v[i.NodeType.Model]}):u.createElement("div",{className:"flex justify-center items-center h-full"},"There are no ",j.m[i.NodeType.Model],"s that depend on this ",j.m[t]),panelClassName:"w-full"}),u.createElement(p.Tab,{id:"InboundDependencies-"+i.NodeType.HttpService,title:u.createElement("div",{className:"flex items-center"},u.createElement(w.a,{className:"mr-2",fixedWidth:!0,icon:j.k[i.NodeType.HttpService]}),j.m[i.NodeType.HttpService],"s (",(null===(s=v[i.NodeType.HttpService])||void 0===s?void 0:s.length)||0,")"),panel:(null===(d=v[i.NodeType.HttpService])||void 0===d?void 0:d.length)?u.createElement(P,{projectId:r,branchSlug:o,projectSlug:a,className:"InboundDependencies__DependencyTable",edges:v[i.NodeType.HttpService]}):u.createElement("div",{className:"flex justify-center items-center h-full"},"There are no ",j.m[i.NodeType.HttpService],"s that depend on this ",j.m[t]),panelClassName:"w-full"}),u.createElement(p.Tab,{id:"InboundDependencies-"+i.NodeType.HttpOperation,title:u.createElement("div",{className:"flex items-center"},u.createElement(w.a,{className:"mr-2",fixedWidth:!0,icon:j.k[i.NodeType.HttpOperation]}),j.m[i.NodeType.HttpOperation],"s (",(null===(g=v[i.NodeType.HttpOperation])||void 0===g?void 0:g.length)||0,")"),panel:(null===(h=v[i.NodeType.HttpOperation])||void 0===h?void 0:h.length)?u.createElement(P,{projectId:r,branchSlug:o,projectSlug:a,className:"InboundDependencies__DependencyTable",edges:v[i.NodeType.HttpOperation]}):u.createElement("div",{className:"flex justify-center items-center h-full"},"There are no ",j.m[i.NodeType.HttpOperation],"s that depend on this ",j.m[t]),panelClassName:"w-full"}),u.createElement(p.Tab,{id:"InboundDependencies-"+i.NodeType.Article,title:u.createElement("div",{className:"flex items-center"},u.createElement(w.a,{className:"mr-2",fixedWidth:!0,icon:j.k[i.NodeType.Article]}),j.m[i.NodeType.Article],"s (",(null===(b=v[i.NodeType.Article])||void 0===b?void 0:b.length)||0,")"),panel:(null===(f=v[i.NodeType.Article])||void 0===f?void 0:f.length)?u.createElement(P,{projectId:r,branchSlug:o,projectSlug:a,className:"InboundDependencies__DependencyTable",edges:v[i.NodeType.Article]}):u.createElement("div",{className:"flex justify-center items-center h-full"},"There are no ",j.m[i.NodeType.Article],"s that depend on this ",j.m[t]),panelClassName:"w-full"})))}),P=({className:e,edges:t=[],projectSlug:n,projectId:a,branchSlug:r})=>{const[o,l]=u.useState(),c={itemData:{edges:Object(m.sortBy)(t,"uri")},itemSize:60,maxRows:10,itemCount:t.length,height:"100%",width:"100%"};return u.createElement("div",{className:S()("h-full",e)},u.createElement(T.FixedSizeList,Object.assign({},c),({style:e,index:t,data:a})=>{const r=a.edges[t];let o=r.fromBranchNodeUri;if(r.fromBranchNodeType===i.NodeType.HttpOperation){const e=r.fromBranchNodeUri.split("/paths/")[1].split("/"),t=e.slice(-1)[0],n=e.slice(0,e.length);o=`${Object(m.toUpper)(t)} ${Object(k.decodePointerFragment)(n.join("/"))}`}return u.createElement("div",{key:t,style:e},u.createElement("div",{className:S()("relative h-full flex flex-col justify-center px-4 hover:bg-gray-2 dark-hover:bg-lighten-3 cursor-pointer",{"border-t dark:border-darken-3":t>0,"bg-gray-1 dark:bg-lighten-2":t%2}),onClick:()=>l(r)},u.createElement("div",{className:"flex items-center"},u.createElement("div",{className:"font-medium"},r.fromBranchNodeName),"0.0"!==r.fromBranchNodeVersion&&u.createElement("div",{className:"px-2 text-sm text-gray-6"},"v",r.fromBranchNodeVersion),u.createElement("div",{className:"flex-1"}),u.createElement("div",{className:"text-sm opacity-75 text-gray-6"},n)),u.createElement("div",{className:"flex items-center opacity-75"},u.createElement("div",{className:"flex-1 text-sm truncate text-gray-6",title:o},o))))}),u.createElement(C,{projectId:a,branchSlug:r,direction:"from",edge:o,onClose:()=>l(void 0)}))};function H(e,t){const n=`<svg xmlns="http://www.w3.org/2000/svg" x="0" y="0" width="512" height="512"><path ${t?`fill="${t}"`:""} d="${j.k[e].icon[4]}"/></svg>`;return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(n)}function U(e,t){return u.useMemo(()=>function(e,t){const n={nodes:[{level:0,id:e.id,title:e.uri,label:e.name,image:H(e.type,"#ef932b")}],edges:[]},a=[e.id];for(const e of t)a.includes(e.fromBranchNodeId)||B(e.fromBranchNodeType)||(a.push(e.fromBranchNodeId),n.nodes.push({level:e.depth,id:e.fromBranchNodeId,label:e.fromBranchNodeName,title:e.fromBranchNodeUri,image:H(e.fromBranchNodeType,"#cfd9e0")})),a.includes(e.toBranchNodeId)||B(e.toBranchNodeType)||(a.push(e.toBranchNodeId),n.nodes.push({level:e.depth,id:e.toBranchNodeId,label:e.toBranchNodeName,title:e.toBranchNodeUri,image:H(e.toBranchNodeType,"#cfd9e0")})),n.edges.push({id:e.id,from:e.fromBranchNodeId,to:e.toBranchNodeId,title:e.fromBranchNodePath});return n.nodes=Object(m.sortBy)(n.nodes,"label"),n}(e,t),[e,t])}var M=n(4307);const A={autoResize:!0,layout:{hierarchical:{enabled:!0,levelSeparation:300,nodeSpacing:150,direction:"LR",sortMethod:"directed",shakeTowards:"leaves",edgeMinimization:!1,blockShifting:!1}},physics:{enabled:!1},edges:{arrowStrikethrough:!1,dashes:!0,chosen:{edge:e=>{e.dashes=!1,e.color="rgb(166, 175, 180)",e.width=3}},width:2,color:{color:"rgb(216, 225, 230)"},font:{align:"top",color:"rgba(115, 134, 148, 0.6)",strokeWidth:0},arrows:{to:{enabled:!0,scaleFactor:.5}}},nodes:{shape:"image",labelHighlightBold:!0}},R=u.memo(({id:e,graph:t,events:n,getNetwork:a})=>{const r=u.useRef(null);return u.useEffect(()=>{if(!r.current)return;const e=new M.a(r.current,t,A);if(e.once("afterDrawing",()=>null==e?void 0:e.setSize("","")),a&&a(e),e)for(const t of Object.keys(n)){const a=n[t];a&&e.on(t,a)}return()=>{e.destroy()}}),u.createElement("div",{id:String(e),ref:r,style:{width:"100%",height:"100%"}})},(e,t)=>e.id===t.id&&Object(m.isEqual)(e.graph,t.graph)),F=({projectId:e,branchSlug:t,className:n,node:a,edges:r,getNetwork:o})=>{const l=a.id,c=U(a,r),s=u.useRef(),[d,i]=u.useState(),[p,m]=u.useState(),g=u.useCallback(e=>{const t=e.nodes[0];if(!t)return;const n=r.find(e=>e.toBranchNodeId===t||e.fromBranchNodeId===t);n&&(i(t),m(n))},[r]);return u.useEffect(()=>{m(void 0)},[l]),u.useEffect(()=>{s.current&&s.current.setSelection({edges:[],nodes:[d||a.id]})},[d,a.id]),c&&c.nodes.length?u.createElement("div",{className:S()(n,"w-full h-full")},u.createElement(R,{id:l,graph:c,events:{click:g},getNetwork:e=>{s.current=e,e&&(e.setSelection({edges:[],nodes:[d||a.id]}),null==o||o(e))}}),u.createElement(C,{direction:d===(null==p?void 0:p.toBranchNodeId)?"to":"from",edge:p,onClose:()=>m(void 0),projectId:e,branchSlug:t})):u.createElement("div",null,"This ",j.m[a.type]," does not have any outbound dependencies.")},L=({className:e,branchNode:t,projectSlug:n,projectId:a,branchSlug:r})=>{const[o,l]=u.useState("outbound"),[{data:c,fetching:s}]=Object(f.wb)({variables:{branchNodeId:t.id,direction:o,depth:5}}),d=(null==c?void 0:c.sl_sl_node_edges)||[],[i,m]=u.useState(!1),g=u.useRef();return u.useEffect(()=>{const e=setTimeout(()=>{g&&g.current&&g.current.fit()},1e3);return()=>clearTimeout(e)},[i]),s?u.createElement("div",{className:S()(e,"Page__dependencies relative h-full flex items-center justify-center")},u.createElement(p.Spinner,null)):u.createElement("div",{className:S()(e,"Page__dependencies",{"fixed inset-0 bg-white dark:bg-gray-7 z-50":i,"relative h-full":!i})},u.createElement("div",{className:S()("inline-flex items-center pb-10",{"absolute top-0 left-0 z-10":d.length&&"outbound"===o})},u.createElement(p.HTMLSelect,{"data-test":"explorer-dependencies-dropdown",value:o,onChange:e=>l(e.currentTarget.value),options:[{label:"What do I depend on? (Outbound)",value:"outbound"},{label:"What depends on me? (Inbound)",value:"inbound"}]}),u.createElement("div",{className:"ml-4"},u.createElement(p.Tooltip,{content:i?"Exit Fullscreen":"Go Fullscreen"},u.createElement(p.Button,{icon:u.createElement(p.Icon,{icon:i?"minimize":"fullscreen",iconSize:14}),onClick:()=>{m(!i)}})))),d.length?"outbound"===o?u.createElement(F,{getNetwork:e=>{e&&(g.current=e)},node:t,edges:d,projectId:a,branchSlug:r}):u.createElement(D,{projectId:a,branchSlug:r,projectSlug:n,edges:d,nodeType:String(t.type)}):u.createElement("div",null,"This ",j.m[t.type]," does not have any ",o," dependencies."))};var z=n(612),W=n(888),q=n(86),G=n(317);const V=({branchNodeUri:e,branchNodeType:t,branchSlug:n,workspaceSlug:a,projectSlug:r})=>{const{actions:o}=Object(E.b)();return u.createElement(p.Popover,{position:p.Position.TOP_RIGHT,content:u.createElement(Q,{branchNodeType:t,branchNodeUri:e,branchSlug:n,workspaceSlug:a,projectSlug:r})},u.createElement(p.Button,{outlined:!0,small:!0,text:"Mock",icon:u.createElement(p.FAIcon,{icon:["far","magic"]}),onClick:()=>{o.reporter.log({event:"explorer_panel_mock_button_clicked"})},"data-test":"mock-btn"}))};function Q({branchNodeUri:e,branchNodeType:t,branchSlug:n,workspaceSlug:a,projectSlug:r}){const{actions:o}=Object(E.b)(),[{data:l,error:c,fetching:s}]=Object(f.Ob)({variables:{uri:e,workspaceSlug:a,projectSlug:r,branchSlug:n}}),d={className:"p-6",style:{width:300}};if(c)return console.error(c),u.createElement("div",Object.assign({},d),u.createElement(p.NonIdealState,{title:"Something went wrong",description:c.message.replace("[GraphQL]","")}));let i="";return l&&(i=l.branchNodeMockUrl.servicePath+(l.branchNodeMockUrl.operationPath||"")),u.createElement("div",Object.assign({},d),u.createElement("div",{className:"text-lg font-bold text-center"},"Hosted Mock Server"),u.createElement("div",{className:"mt-3"},"Stoplight provides a hosted mock server for all of your APIs, for use during development."),u.createElement("div",{className:"mt-3"},"The mock server will validate all requests and will respond with a dynamically generated response or a specific example."),u.createElement("div",{className:"mt-3"},"To learn more about the different mocking options,"," ",u.createElement("a",{className:"text-blue-6",href:"https://meta.stoplight.io/docs/platform/3.-design/d.setting-up-a-mock-server.md",target:"_blank",rel:"noopener noreferrer"},"read the docs.")),u.createElement("div",{className:"flex mt-4"},u.createElement(p.FormInput,{"data-test":"mock-url-input",className:"flex-1",readOnly:!0,type:"text",disabled:s,value:i,dir:"auto",rightElement:u.createElement(p.Popover,{content:u.createElement("div",{className:"p-3 text-center w-64"},"The copied link is the mock URL structure. Fill in your own parameters.")},u.createElement(p.Button,{icon:u.createElement(p.FAIcon,{icon:["fas","copy"]}),intent:"primary",minimal:!0,loading:s,onClick:()=>{G(i),o.reporter.log({event:"mock_url_copied",payload:{url:i,node_type:t}})},"data-test":"mock-url-copy-btn"}))})))}var $=n(3589);const J=({nodeId:e,projectId:t,className:n})=>{let{actions:a}=Object(E.b)();const[{data:r,fetching:o}]=Object(f.Pb)({variables:{nodeId:e,projectId:t}}),l=!!(null==r?void 0:r.stars.length),[,c]=Object(f.qc)(),[,s]=Object(f.tc)();return u.createElement(p.Tooltip,{content:(l?"Unstar":"Star")+" this node"},u.createElement(p.Button,{"data-test":"explorer-node-panel-star-btn",outlined:!0,small:!0,className:y(n),icon:u.createElement(p.FAIcon,{icon:[l?"fas":"far","star"],className:y({"text-primary":l})}),loading:o,onClick:async()=>{l?await s({projectId:t,nodeId:e}):await c({projectId:t,nodeId:e}),a.explorer.touchQueries(),a.reporter.log({event:"button_clicked",payload:{name:"star",location:"explorer_node_panel"}})}}))};var K=n(3590),X=n(132);const Y=e=>{var{children:t,className:n,panelClassName:a,scrollbarRef:r}=e,o=Object(x.__rest)(e,["children","className","panelClassName","scrollbarRef"]);return u.createElement(p.Tabs,Object.assign({className:y("PanelTabs flex flex-col",n),animate:!1},o,{renderActiveTabPanelOnly:!0}),u.Children.toArray(t).map(e=>e&&e.type===p.Tab?u.cloneElement(e,{panelClassName:"flex-1 overflow-auto",panel:u.createElement("div",{className:y("NodePanel",a,e.props.panelClassName),ref:r},e.props.panel)}):e))},Z=u.memo(({branchNode:e,branchSlug:t,projectSlug:n,projectId:s,workspaceSlug:d,className:i})=>{var g;const{state:h,actions:y}=Object(E.b)(),[S,j]=u.useState("docs"),w=u.useRef(null),k=e.type===f.w.HttpOperation,T=["http_operation","model"].includes(e.type),x=!Object(m.compact)(["docs",k&&"tryit",T&&"dependencies","changelog"]).includes(S);u.useEffect(()=>{x&&j("docs")},[x]);const I=Object(c.useParsedData)(e.type,e.data);u.useEffect(()=>{w.current&&w.current.parentElement&&"scrollTo"in w.current.parentElement&&w.current.parentElement.scrollTo(0,0)},[e.id]);const O=f.L.DependencyGraph,_=!h.features.isFeatureEnabled(O),B=u.useMemo(()=>({node:t,children:n})=>{let r=t.url;if(r.startsWith("./")){const t=e.uri.split("/");t.splice(-1,1,r.replace(/^\.\/+/,"")),r="."+t.join("/")}return r.startsWith("/")&&(r="."+r),/^(http|#|mailto)/.test(t.url)?u.createElement("a",{href:t.url,target:t.url.startsWith("#")?void 0:"_blank",rel:"noreferrer noopener"},n):u.createElement(a.a,{to:r},n)},[e.uri]),C=u.useMemo(()=>({node:n})=>u.createElement(W.b,{node:n,branchNode:e,branchSlug:t}),[e,t]),D=Object(N.a)(e),P=e.type===f.w.Model||e.type===f.w.HttpService&&!h.elementsOptIn.shouldShowElementsV7;return u.createElement(o.Provider,{host:h.router.appUrl,authToken:null!==(g=h.auth.jwt)&&void 0!==g?g:void 0,workspace:d,project:n,branch:t,node:e.uri,components:{link:B,image:C}},u.createElement(Y,{id:`branch_node_${e.id}_panel`,className:i,selectedTabId:S,onChange:t=>{j(t),y.reporter.log({event:"node_panel_tab_changed",payload:{tab:t,node_type:e.type}})},scrollbarRef:w,panelClassName:"p-10"},u.createElement(p.Tab,{id:"docs",title:"Docs",panelClassName:"overflow-auto",panel:h.elementsOptIn.shouldShowElementsV7?u.createElement(te,{projectId:Object(v.b)("prj",s),branchSlug:t,nodeSlug:D}):u.createElement(l.InlineRefResolverProvider,{document:I},u.createElement(r.ParsedDocs,{nodeType:e.type,nodeData:I}))}),k&&u.createElement(p.Tab,{id:"tryit",title:"Try It",panel:h.elementsOptIn.shouldShowElementsV7?u.createElement(ee,{branchNode:e,branchSlug:t,projectSlug:n,workspaceSlug:d}):u.createElement(K.a,{nodeType:e.type,nodeUri:e.uri,nodeData:e.data,workspaceSlug:d,projectSlug:n,branchSlug:t}),"data-test":"try-it-tab"}),T&&u.createElement(p.Tab,{id:"dependencies",title:u.createElement("div",null,"Dependencies",_&&u.createElement(q.a,{feature:O,className:"ml-2",minimal:!0})),disabled:_,panelClassName:"h-full",panel:u.createElement(L,{projectId:s,branchSlug:t,branchNode:e,projectSlug:n}),"data-test":"dependencies-tab"}),u.createElement(p.Tab,{id:"changelog",title:"Changelog",panel:u.createElement(b.a,{uri:e.uri,projectSlug:n,workspaceSlug:d})}),u.createElement(p.Tabs.Expander,null),u.createElement("div",{className:"flex items-center"},((H=e).type===f.w.HttpService||H.type===f.w.HttpOperation)&&u.createElement(V,{branchNodeUri:e.uri,branchNodeType:e.type,branchSlug:t,workspaceSlug:d,projectSlug:n}),u.createElement(J,{nodeId:e.nodeId,projectId:s,className:"ml-2"}),P&&u.createElement($.a,{workspaceSlug:d,projectSlug:n,nodeUri:e.uri,branchSlug:t,className:"ml-2"}))));var H},h.a),ee=({branchNode:e,branchSlug:t,projectSlug:n,workspaceSlug:a})=>{const r=e.type===f.w.HttpOperation,o=Object(s.p)(i.NodeType.HttpOperation,e.data),[{data:l}]=Object(f.Ob)({variables:{uri:e.uri,workspaceSlug:a,projectSlug:n,branchSlug:t},pause:!r});return u.createElement(s.l,{httpOperation:null==o?void 0:o.data,mockUrl:null==l?void 0:l.branchNodeMockUrl.servicePath})},te=({nodeSlug:e,projectId:t,branchSlug:n})=>{const{data:r,isFetching:o,error:l}=Object(d.d)({nodeSlug:e,projectId:t,branchSlug:n});return o?u.createElement(z.a,null):l||!r?u.createElement(X.a,null):u.createElement(d.b,{node:r,Link:a.a,hideTryItPanel:!0})};t.default=Z},4331:function(e,t,n){"use strict";n.r(t);var a=n(16),r=n(1438),o=n(1437),l=n(637),c=n(640),s=n(87),d=n(296),i=n(1),p=n(137),m=n(3),u=n(5),g=n(0),h=n(143),b=n.n(h),f=n(3632),v=n(75),N=n(3587),E=n(4);const y=({branchNode:e,projectSlug:t,workspaceSlug:n,isOpen:a,onClose:r,dialogLocation:o})=>{const{actions:l}=Object(E.b)(),[c,s]=g.useState(!1),{changes:d}=Object(N.a)({uri:e.uri,projectSlug:t,workspaceSlug:n,pause:!a});return g.createElement(v.a,{isOpen:a,onClose:()=>{r(),s(!1)},title:"Changelog",bgClassName:"bg-white",className:"overflow-auto",style:{maxHeight:300},onOpened:()=>{l.reporter.log({event:"changelog_dialog_opened",payload:{location:o,node_type:e.type,changes_count:null==d?void 0:d.length}})}},g.createElement(f.a,{uri:e.uri,projectSlug:t,workspaceSlug:n}),"true"!==window.localStorage.getItem("feedback")&&g.createElement(v.b,{actionsLeft:!0,primaryActions:[g.createElement(g.Fragment,null,g.createElement("div",{className:"flex flex-row items-center"},g.createElement("div",{className:u("mr-2",{hidden:c})},"Do you find this information useful?"),g.createElement(m.Button,{key:"1",outlined:!0,className:u("mr-2",{hidden:c}),onClick:()=>{s(!0),l.reporter.log({event:"feedback_given",payload:{target:"changelog_dialog",value:"positive",node_type:e.type,changes_count:null==d?void 0:d.length}}),window.localStorage.setItem("feedback",JSON.stringify(!0))},icon:g.createElement(m.FAIcon,{icon:["far","thumbs-up"]})}),g.createElement(m.Button,{key:"2",outlined:!0,className:u({hidden:c}),onClick:()=>{s(!0),l.reporter.log({event:"feedback_given",payload:{target:"changelog_dialog",value:"negative",node_type:e.type,changes_count:null==d?void 0:d.length}}),window.localStorage.setItem("feedback",JSON.stringify(!0))},icon:g.createElement(m.FAIcon,{icon:["far","thumbs-down"]})}),g.createElement("div",{className:u({hidden:!c})},"Thanks for your feedback!")))]}))};var S=n(888),j=n(3589),w=n(3590),k=n(2);const T=g.memo(({branchNode:e,branchSlug:t,projectSlug:n,node:r,workspaceSlug:l})=>{const c=e.type===k.w.HttpOperation,{state:{elementsOptIn:{shouldShowElementsV7:s},router:{appUrl:d},auth:{jwt:i,isLoggedIn:m}}}=Object(E.b)();g.useEffect(()=>{window.scroll({top:0,left:0,behavior:"smooth"})},[e.id]);const u=g.useMemo(()=>({node:t,children:n})=>{if(/^(http|#|mailto)/.test(t.url))return g.createElement("a",{href:t.url,target:t.url.startsWith("#")?void 0:"_blank",rel:"noreferrer noopener"},n);const r=t.url,o="."+Object(p.resolve)(Object(p.dirname)(e.uri),r);return g.createElement(a.a,{to:o},n)},[e.uri]),h=g.useMemo(()=>({node:n})=>g.createElement(S.b,{node:n,branchNode:e,branchSlug:t}),[e,t]);return g.createElement(o.Provider,{host:d,authToken:null!=i?i:void 0,workspace:l,project:n,branch:t,node:e.uri,components:{link:u,image:h}},s?r&&g.createElement(I,{isLoggedIn:m,branchNode:e,branchSlug:t,projectSlug:n,node:r,workspaceSlug:l}):g.createElement(x,{showTryIt:c,isLoggedIn:m,branchNode:e,branchSlug:t,projectSlug:n,workspaceSlug:l}))},b.a),x=({showTryIt:e,isLoggedIn:t,branchNode:n,projectSlug:a,branchSlug:o,workspaceSlug:s})=>{const d=Object(c.useParsedData)(n.type,n.data),[p,h]=g.useState(!1),b=n.type===k.w.Model,f=n.type===k.w.HttpOperation,v=n.type===k.w.Article;return g.createElement("div",{className:"flex flex-grow"},g.createElement("div",{"data-test":"project-page",className:u("ProjectPage flex-1 px-24 py-20",{"w-3/5":e,Model:b,Article:v,HttpOperation:f})},g.createElement("div",{className:"flex justify-end"},t&&!v&&g.createElement(g.Fragment,null,g.createElement(y,{branchNode:n,projectSlug:a,workspaceSlug:s,isOpen:p,onClose:()=>h(!1),dialogLocation:"project_doc_page"}),g.createElement(i.e,{size:"sm",icon:["fas","exchange-alt"],id:"changelog-btn",mr:2,onClick:()=>{h(!0)}},"Changelog")),[k.w.HttpService,k.w.Model].includes(n.type)&&g.createElement(j.a,{workspaceSlug:s,projectSlug:a,nodeUri:n.uri,branchSlug:o})),g.createElement(l.InlineRefResolverProvider,{document:d},g.createElement(r.ParsedDocs,{nodeType:n.type,nodeData:d}))),e&&g.createElement("div",{className:"bg-gray-1 w-2/5 border-l relative"},g.createElement("div",{className:"absolute inset-0 overflow-auto p-10"},g.createElement("h2",{className:"opacity-75 ml-1 mt-10 mb-8 font-medium flex items-center"},g.createElement("div",{className:"flex-1"},g.createElement(m.FAIcon,{icon:["fad","magic"],className:"mr-4"})," Try It Out"),g.createElement(m.Popover,{boundary:"window",position:m.Position.TOP_RIGHT,content:g.createElement("div",{className:"p-4 text-center w-96"},"Send HTTP requests to your API, or one of our mock servers, to see how it's going to respond. View the docs"," ",g.createElement("a",{href:"https://meta.stoplight.io/docs/studio/docs/Design-and-Modeling/05-request-maker.md",target:"_blank",rel:"noopener noreferrer"},"here.")),interactionKind:"hover"},g.createElement(m.FAIcon,{icon:"question-circle"}))),g.createElement(w.a,{nodeType:n.type,nodeUri:n.uri,nodeData:n.data,workspaceSlug:s,projectSlug:a,branchSlug:o}))))},I=({isLoggedIn:e,branchNode:t,projectSlug:n,node:r,workspaceSlug:o})=>{const[l,c]=g.useState(!1),p=r.type===k.w.Model,h=r.type===k.w.HttpOperation,b=r.type===k.w.Article;return g.createElement(s.c,{value:{img:S.a}},g.createElement(i.n,{px:20,py:16,spacing:12,mx:"auto",alignItems:"start",className:"ProjectPage",w:"full"},g.createElement(i.d,{"data-test":"project-page",flexGrow:!0,className:u({Model:p,Article:b,HttpOperation:h})},g.createElement(i.m,{justify:"end"},e&&!b&&g.createElement(g.Fragment,null,g.createElement(y,{branchNode:t,projectSlug:n,workspaceSlug:o,isOpen:l,onClose:()=>c(!1),dialogLocation:"project_doc_page"}),g.createElement(i.e,{size:"sm",icon:g.createElement(m.FAIcon,{icon:["fas","exchange-alt"]}),onClick:()=>{c(!0)}},"Changelog"))),g.createElement(d.b,{Link:a.a,node:r}))))};t.default=T}}]);