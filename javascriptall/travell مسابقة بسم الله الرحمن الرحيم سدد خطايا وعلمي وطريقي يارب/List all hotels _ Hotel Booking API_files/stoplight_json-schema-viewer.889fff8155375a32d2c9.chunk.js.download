(self.webpackJsonp=self.webpackJsonp||[]).push([[28],{1436:function(e,t,r){"use strict";r.r(t),r.d(t,"JsonSchemaViewer",(function(){return Ne})),r.d(t,"PropertyTypeColors",(function(){return me})),r.d(t,"ResolvingError",(function(){return O})),r.d(t,"SchemaKind",(function(){return s})),r.d(t,"SchemaRow",(function(){return je})),r.d(t,"SchemaTree",(function(){return ne})),r.d(t,"SchemaTreeComponent",(function(){return xe})),r.d(t,"getNodeMetadata",(function(){return A}));var n=r(39),i=r(73);r.d(t,"SchemaTreeState",(function(){return i.TreeState}));var s,a,o=r(5),l=r.n(o),c=r(59),d=r(0),p=r(55),m=r(9),u=r(101),f=r(3),h=r(174);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function y(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function b(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}class O extends ReferenceError{constructor(){super(...arguments),this.name="ResolvingError"}}(a=s||(s={})).Any="any",a.String="string",a.Number="number",a.Integer="integer",a.Boolean="boolean",a.Null="null",a.Array="array",a.Object="object";const g=e=>"type"in e&&"items"in e&&(e.type===s.Array||Array.isArray(e.type)&&e.type.includes(s.Array))&&Object(m.isObjectLike)(e.items),j=e=>"$ref"in e,v=e=>g(e)&&"$ref"in e.items,x=e=>"combiner"in e;function w(e){return"type"in e?e.type:"properties"in e?s.Object:"items"in e?s.Array:void 0}const E=new WeakMap,A=e=>{const t=E.get(e);if(void 0===t)throw new Error("Missing metadata");return t},N=e=>{const t=A(e);if(!("schema"in t))throw new TypeError("Schema node expected");return t},R=e=>{let t;return"anyOf"in e&&(null!=t||(t=[]),t.push("anyOf")),"oneOf"in e&&(null!=t||(t=[]),t.push("oneOf")),"allOf"in e&&(null!=t||(t=[]),t.push("allOf")),t};function k(e){if("type"in e&&void 0!==e.type){if(Array.isArray(e.type)){if(e.type.includes(s.Object))return s.Object;if(e.type.includes(s.Array))return s.Array}return e.type}return w(e)}const S=()=>Math.random().toString(36);function T(e,t){const{path:r}=N(e),n={id:S(),name:"",parent:e};return E.set(n,{path:r,error:t}),n}const $=r(1455),P=new WeakMap,M=(e,t,r)=>{try{return P.has(r)||P.set(r,new WeakMap),function e(t,r,n){return $(t,{deep:!1,resolvers:$.stoplightResolvers,$refResolver(i){if("string"!=typeof i)return{};if(Object(p.pathToPointer)(r).startsWith(i))throw new O("Circular reference detected");const s=P.get(n);let a=s.get(t);if(void 0===a)a=[i],s.set(t,a);else{if(a.includes(i)){const t=JSON.parse(Object(p.safeStringify)(n.resolveRef(null,i)));return"allOf"in t?e(t,r,n):t}a.push(i)}const o=n.resolveRef(null,i);if(Array.isArray(o.allOf))for(const e of o.allOf)if("boolean"!=typeof e&&"string"==typeof e.$ref&&a.includes(e.$ref))throw new O("Circular reference detected");return o}})}(e,t,r)}catch(e){throw console.info(e.message),e}};function C(e,t,r,n){const i=e[t];if(!Array.isArray(i))return[];const s=[];if(Array.isArray(e.allOf)&&Array.isArray(i)){for(const t of i)s.push({allOf:[...e.allOf,t].filter(m.isObject)});return s}for(const a of i){const i=Object.assign({},e);delete i[t],s.push(M({allOf:[i,a].filter(m.isObject)},r,n))}return s}const D=e=>"string"==typeof e&&Object.values(s).includes(e);function F(e){if(Object.keys(e).length>1||!("type"in e))throw new Error('The "type" property must be a string, or an array of strings. Objects and array of objects are not valid.');if("type"in e&&D(e.type))return e.type}function L(e){return"string"==typeof e?e:"object"==typeof e&&null!==e?F(e):void 0}const V=e=>{if("string"==typeof e&&D(e))return e;if("object"==typeof e&&null!==e){if(Array.isArray(e)){const t=[];for(const r of e){const e=L(r);D(e)&&!t.includes(e)&&t.push(e)}return t.length>0?t:void 0}return F(e)}},I=["description","default","examples"];function J(e){return Object(m.pick)(e,I)}const q=["enum","format","default","example","nullable","discriminator","readOnly","writeOnly","xml","externalDocs"],G={string:["minLength","maxLength","pattern"],number:["multipleOf","minimum","exclusiveMinimum","maximum","exclusiveMaximum"],get integer(){return this.number},object:["additionalProperties","minProperties","maxProperties"],array:["additionalItems","minItems","maxItems","uniqueItems"]},W={int32:{minimum:0-Math.pow(2,31),maximum:Math.pow(2,31)-1},int64:{minimum:0-Math.pow(2,63),maximum:Math.pow(2,63)-1},float:{minimum:0-Math.pow(2,128),maximum:Math.pow(2,128)-1},double:{minimum:0-Number.MAX_VALUE,maximum:Number.MAX_VALUE},byte:{pattern:"^[\\w\\d+\\/=]*$"}};function U(e){return Array.isArray(e)?Object(m.flatMap)(e,U):G[e]||[]}const z=e=>{const t=e.type&&U(e.type),r=function(e){return"x-deprecated"in e?!!e["x-deprecated"]:"deprecated"in e?!!e.deprecated:void 0}(e);return function(e){const{format:t}=e;if("string"!=typeof t||!(t in W))return e;const r=Object.assign({},e);for(const[e,n]of Object.entries(W[t]))n===r[e]&&delete r[e];return r}(Object.assign(Object.assign(Object.assign({},Object(m.pick)(e,q)),t&&Object(m.pick)(e,t)),void 0!==r&&{deprecated:r}))},B=e=>{if(Array.isArray(e))return e.filter(e=>"string"==typeof e||"number"==typeof e).map(String)};function*K(e){const t=R(e),r=e.type||w(e),n="string"==typeof e.title?{title:e.title}:null;if(void 0!==t)for(const i of t){const t=e[i],s=Object.assign(Object.assign({id:S(),combiner:i,properties:Array.isArray(t)?t.slice():t,annotations:J(e)},void 0!==r&&{type:V(r)}),n);yield s}else if(r){let t=e;if(k(e)===s.Array&&Object(m.isObject)(e.items)&&!Array.isArray(e.items)&&void 0===R(e.items)){const r=k(e.items);r!==s.Array&&r!==s.Object&&(t=e.items)}const i=Object.assign(Object.assign(Object.assign({id:S(),type:V(r),validations:z(t),annotations:J(e)},"required"in e&&{required:B(e.required)}),{enum:e.enum}),n);!function(e,t){switch(k(t)){case s.Array:e.items=H(t.items),e.additionalItems="boolean"==typeof t.additionalItems?t.additionalItems:H(t.additionalItems);break;case s.Object:e.properties=X(t.properties),e.patternProperties=X(t.patternProperties),e.additionalProperties="boolean"==typeof t.additionalProperties?t.additionalProperties:X(t.additionalProperties)}}(i,e),yield i}else"enum"in e?yield Object.assign({id:S(),validations:z(e),annotations:J(e),enum:e.enum},n):"$ref"in e?yield Object.assign({id:S(),$ref:"string"!=typeof e.$ref?null:e.$ref},n):"not"in e||(yield{id:S(),validations:{},annotations:{}})}function H(e){return Object(m.isObject)(e)?e:void 0}function X(e){return Object(m.isObject)(e)&&!Array.isArray(e)?e:void 0}const _=(e,t,r,n,i)=>{const a=re(e,t,n,i);if(Object(m.isObject)(a))for(const{node:o,fragment:l}of function*e(t){if(Array.isArray(t))for(const r of t)yield*e(r);else for(const e of K(t))yield{node:e,fragment:t}}(a)){if(null!==i&&void 0!==i.onNode&&!i.onNode(l,o,t,r))continue;const a={id:o.id,name:"",parent:t};if(t.children.push(a),E.set(a,{schemaNode:o,schema:l,path:n}),j(o)&&null!==o.$ref)Z(a,o,r,n,i);else if(x(o)){if("allOf"===o.combiner&&(null==i?void 0:i.mergeAllOf)){if("oneOf"in l||"anyOf"in l){t.children.pop();continue}try{const e=M(l,n,i);t.children.pop(),_(e,t,r,n,i)}catch(e){Array.isArray(l.allOf)&&(a.children=[],ee(a,l,r+1,[...n,"allOf"],i))}}else if(Object(m.isObject)(o.properties)){if(a.children=[],"oneOf"===o.combiner||"anyOf"===o.combiner)try{o.properties=C(l,o.combiner,[...n,o.combiner],i)}catch(e){}for(const[e,t]of o.properties.entries())"type"in o&&(o.properties[e]=Object.assign(Object.assign({},t),{type:t.type||o.type})),_(o.properties[e],a,r+1,[...n,o.combiner,e],i)}}else switch(k(o)){case s.Array:Q(a,o,r,n,i);break;case s.Object:Y(a,o,r,n,i)}}};function Q(e,t,r,n,i){if("boolean"==typeof t.items)return e;const s=re(t.items,e,n,i);if(!Object(m.isObject)(s))return e;if(s!==t.items){const t=A(e);"schemaNode"in t&&(t.schemaNode.items=s)}if("$ref"in s)Z(e,s,r,n,i);else if(Array.isArray(s)){const t=[];e.children=t;for(const[a,o]of s.entries()){const s=_(o,e,r+1,[...n,"items",a],i);void 0!==s&&t.push(s)}}else{const a=[];if(e.children=a,_(s,e,r,[...n,"items"],i),1===a.length){let r;try{({schemaNode:r}=N(a[0]))}catch(t){return e}if("children"in a[0]){if(!("combiner"in r)){for(const t of a[0].children)t.parent=e;a.splice(0,a.length,...a[0].children)}}else delete e.children}}return e}function Y(e,t,r,n,i){const s=[];if(Object(m.isObject)(t.properties)){e.children=s;for(const[a,o]of Object.entries(t.properties)){const t=_(o,e,r+1,[...n,"properties",a],i);void 0!==t&&s.push(t)}}if(Object(m.isObject)(t.patternProperties)){e.children=s;for(const[a,o]of Object.entries(t.patternProperties)){const t=_(o,e,r+1,[...n,"patternProperties",a],i);void 0!==t&&s.push(t)}}return e}function Z(e,t,r,n,i){e.children=[];try{const r=te(t,n,i);if(Object(m.isObject)(r)&&"string"==typeof r.title){const{schemaNode:t}=N(e);t.title=r.title}}catch(e){}}function ee(e,t,r,n,i){if(Array.isArray(t.allOf))for(const[s,a]of t.allOf.entries())"boolean"!=typeof a&&_(a,e,r,[...n,s],i)}function te(e,t,r){if(!Object(m.isObject)(e)||null===r||!("$ref"in e)||"string"!=typeof e.$ref)return e;const n=r.resolveRef(t,e.$ref);return Object(m.isObject)(n)?n:e}function re(e,t,r,n){if(null===n||!n.shouldResolveEagerly)return e;try{return te(e,r,n)}catch(n){const i={id:S(),name:"",parent:t,children:[]};return t.children.push(i),E.set(i,{schemaNode:K(e||{}).next().value,schema:e||{},path:r}),i.children.push(T(i,n.message)),null}}class ne extends i.Tree{constructor(e,t,r){super({expanded:e=>!(e.id in t.expanded)&&ne.getLevel(e)<=r.expandedDepth||!0===t.expanded[e.id]}),this.schema=e,this.state=t,this.visited=new WeakSet,this.isViewModeRespected=e=>!("writeOnly"in e||"readOnly"in e)||!(!!e.writeOnly!=!!e.readOnly&&("read"===this.treeOptions.viewMode&&e.writeOnly||"write"===this.treeOptions.viewMode&&e.readOnly)),this.resolveRef=(e,t)=>{const r=Object(p.extractSourceFromRef)(t),n=Object(p.extractPointerFromRef)(t);if(void 0!==this.treeOptions.resolveRef)return this.treeOptions.resolveRef({source:r,pointer:n},e,this.schema);if(null!==r)throw new O("Cannot dereference external references");if(null===n)throw new O("The pointer is empty");return Object(m.get)(this.schema,Object(p.pointerToPath)(n))},this.treeOptions=r}getChildrenCount(e){const t=j(e)?"$ref":x(e)?e.combiner:e.type,r=g(e)?v(e)?"$ref":w(e.items):void 0;let n;return(t===s.Object||Array.isArray(t)&&t.includes(s.Object))&&(n=e.properties),r===s.Object&&(n=e.items.properties),r===s.Array&&(n=e.items),"object"==typeof n&&null!==n?Object.values(n).filter(this.isViewModeRespected).length:null}populate(){var e,t;const r={};_(this.schema,this.root,0,[],{mergeAllOf:this.treeOptions.mergeAllOf,onNode:(e,t,n,s)=>{if(!this.isViewModeRespected(e))return!1;!this.treeOptions.shouldResolveEagerly&&(j(t)&&null!==t.$ref||v(t)&&null!==t.items.$ref)&&(r[t.id]=!1);const a=i.Tree.getLevel(n)>=0?N(n):void 0;return(void 0===a||!j(a.schemaNode))&&s<=this.treeOptions.expandedDepth+1},resolveRef:this.resolveRef,shouldResolveEagerly:this.treeOptions.shouldResolveEagerly}),this.state.expanded=r,this.invalidate(),null===(t=(e=this.treeOptions).onPopulate)||void 0===t||t.call(e,this,this.root)}populateTreeFragment(e,t,r,n){var a,o;const l=i.Tree.getLevel(e),c=i.Tree.createArtificialRoot();if(_(t,c,l,r,{mergeAllOf:this.treeOptions.mergeAllOf,onNode:(e,t,r,i)=>!!this.isViewModeRespected(e)&&(i<=this.treeOptions.expandedDepth||i<=l||n&&i<=l+1&&(e=>{if(void 0!==R(e))return!0;const t=k(e);return t===s.Array||t===s.Object})(N(r).schema)),resolveRef:this.resolveRef,shouldResolveEagerly:this.treeOptions.shouldResolveEagerly}),0===c.children.length)throw new Error("Could not expand node "+r.join("."));this.insertTreeFragment(n?this.stepIn(c,e):c.children,e),null===(o=(a=this.treeOptions).onPopulate)||void 0===o||o.call(a,this,e)}insertErrorNode(e,t){this.insertNode(T(e,t),e)}stepIn(e,t){return e.children.length>0&&"children"in e.children[0]&&Object(m.isEqual)(N(t).path,N(e.children[0]).path)?e.children[0].children:e.children}unwrap(e){if(0!==e.children.length||this.visited.has(e))return super.unwrap(e);const t=N(e),{path:r,schemaNode:n,schema:i}=t;try{if(j(n)||v(n))if(j(n))this.populateRefFragment(e,r,n.$ref);else{if(!v(n))throw new Error("I do know not how to expand this node "+r.join("."));this.populateRefFragment(e,[...r,"items"],n.items.$ref)}else this.populateTreeFragment(e,i,r,!0)}catch(t){this.insertErrorNode(e,t.message)}return this.visited.add(e),super.unwrap(e)}populateRefFragment(e,t,r){if(null===r)throw new Error("Unknown $ref value");const n=this.resolveRef(t,r);if(!Object(m.isObject)(n))throw new O(`Could not dereference "${r}"`);this.populateTreeFragment(e,n,t,!1)}}const ie=["allOf","oneOf","anyOf"],se=({style:e,size:t,isExpanded:r})=>Object(d.createElement)("span",{className:"absolute flex justify-center cursor-pointer p-1 rounded hover:bg-darken-3",role:"button",style:e},Object(d.createElement)(f.Icon,{iconSize:t,icon:r?"caret-down":"caret-right",className:"text-darken-9 dark:text-lighten-7"})),ae=({value:e})=>Object(d.createElement)(f.Popover,{boundary:"window",interactionKind:"hover",className:"ml-2 flex-1 truncate flex items-baseline",target:Object(d.createElement)("div",{className:"text-darken-7 dark:text-lighten-7 w-full truncate"},e),targetClassName:"text-darken-7 dark:text-lighten-6 w-full truncate",content:Object(d.createElement)("div",{className:"p-5",style:{maxHeight:500,maxWidth:400}},Object(d.createElement)(h.b,{markdown:e}))}),oe={allOf:"and",anyOf:"and/or",oneOf:"or"},le=({kind:e})=>Object(d.createElement)("div",{className:"flex items-center w-full absolute",style:{top:-9,height:1}},Object(d.createElement)("div",{className:"text-darken-7 dark:text-lighten-8 uppercase text-xs pr-2 -ml-4"},oe[e]),Object(d.createElement)("div",{className:"flex-1 bg-darken-5 dark:bg-lighten-5",style:{height:1}}));function ce(e){return e===s.Array||e===s.Object||"$ref"===e}const de=({className:e,title:t,type:r,subtype:n})=>Object(d.createElement)("span",{className:l()(e,me[r],"truncate")},function(e,t,r){return e===s.Array?function(e,t){return e?Array.isArray(e)?`${s.Array}[${e.join(",")}]`:t&&ce(e)?t+"[]":e!==s.Array&&"$ref"!==e?`${s.Array}[${e}]`:s.Array:s.Array}(t,r):r&&ce(e)?r:e}(r,n,t));de.displayName="JsonSchemaViewer.Type";const pe=({className:e,title:t,type:r,subtype:n})=>void 0===r?null:Array.isArray(r)?Object(d.createElement)("div",{className:l()(e,"truncate")},Object(d.createElement)(d.Fragment,null,r.map((e,r,{length:i})=>Object(d.createElement)(d.Fragment,{key:r},Object(d.createElement)(de,{key:r,type:e,subtype:n,title:t}),r<i-1&&Object(d.createElement)("span",{key:r+"-sep",className:"text-darken-7 dark:text-lighten-6"}," or "))))):Object(d.createElement)(de,{className:e,type:r,subtype:n,title:t});pe.displayName="JsonSchemaViewer.Types";const me={object:"text-blue-6 dark:text-blue-4",any:"text-blue-5",array:"text-green-6 dark:text-green-4",allOf:"text-orange-5",anyOf:"text-orange-5",oneOf:"text-orange-5",null:"text-orange-5",integer:"text-red-7 dark:text-red-6",number:"text-red-7 dark:text-red-6",boolean:"text-red-4",binary:"text-green-4",string:"text-green-7 dark:text-green-5",$ref:"text-purple-6 dark:text-purple-4"};function ue(e){return j(e)&&null!==e.$ref?e.$ref:v(e)&&null!==e.items.$ref?`$ref(${e.items.$ref})`:void 0}const fe=({node:e,onGoToRef:t})=>{const{path:r,schemaNode:n}=N(e),i=j(n)?"$ref":x(n)?n.combiner:n.type,a=g(n)?v(n)?"$ref":w(n.items):void 0,o=function(e){return g(e)?Array.isArray(e.items)||!e.items.title?ue(e):e.items.title:e.title||ue(e)}(n),l=Object(d.useContext)(Ee),c=Object(d.useMemo)(()=>l.tree.getChildrenCount(n),[n,l]),m=Object(d.useCallback)(()=>{t&&j(n)&&null!==n.$ref&&t(n.$ref,n)},[t,n]);return Object(d.createElement)(d.Fragment,null,r.length>0&&function(e){if(null===e.parent)return!1;try{const{schemaNode:t}=N(e.parent);if(!("type"in t)||"combiner"in t)return!1;const r=k(t);if(r===s.Array&&t.items){const{schemaNode:t}=N(e);return!("combiner"in t)}return r===s.Object}catch(e){return!1}}(e)&&Object(d.createElement)("div",{className:"mr-2"},r[r.length-1]),Object(d.createElement)(pe,{type:i,subtype:a,title:o}),t&&j(u=n)&&null!==u.$ref&&!Object(p.isLocalRef)(u.$ref)?Object(d.createElement)("a",{role:"button",className:"text-blue-4 ml-2",onClick:m},"(go to ref)"):null,null!==c&&Object(d.createElement)("div",{className:"ml-2 text-darken-7 dark:text-lighten-7"},`{${c}}`),r.length>1&&"patternProperties"===r[r.length-2]?Object(d.createElement)("div",{className:"ml-2 text-darken-7 dark:text-lighten-7 truncate"},"(pattern property)"):null);var u},he=e=>{var{required:t}=e,r=e.validations,{deprecated:n,readOnly:i,writeOnly:s,format:a}=r,o=y(r,["deprecated","readOnly","writeOnly","format"]);const l=Object(d.useContext)(we),c=Object.keys(o).length,m=Object(d.createElement)("div",null,t&&Object(d.createElement)("span",{className:"ml-2 text-orange-7 dark:text-orange-6"},"required"),c?Object(d.createElement)("span",{className:"ml-1 text-darken-7 dark:text-lighten-6"},"+",c):null),u="standalone"===l&&!!i!=!!s?Object(d.createElement)("span",{className:"ml-2 text-darken-7 dark:text-lighten-6"},i?"read-only":"write-only"):null;return Object(d.createElement)(d.Fragment,null,n?Object(d.createElement)("span",{className:"ml-2 text-orange-7 dark:text-orange-6"},"deprecated"):null,u,c?Object(d.createElement)(f.Popover,{boundary:"window",interactionKind:"hover",content:Object(d.createElement)("div",{className:"p-5",style:{maxHeight:500,maxWidth:400}},Object.keys(o).map((e,t)=>{const r=o[e];let n=null;return n=Array.isArray(r)?r.map((e,t)=>Object(d.createElement)("div",{key:t,className:"mt-1 mr-1 flex items-center"},Object(d.createElement)("div",{className:"px-1 bg-gray-2 dark:bg-gray-8 font-bold text-sm rounded"},String(e)),t<r.length-1?Object(d.createElement)("div",null,","):null)):Object(d.createElement)("div",{className:"m-1 px-1 bg-gray-2 dark:bg-gray-8 font-bold text-sm rounded",key:t},"object"==typeof r?"{...}":"string"==typeof r?`"${r}"`:Object(p.safeStringify)(r)),Object(d.createElement)("div",{key:t,className:"py-1 flex items-baseline"},Object(d.createElement)("div",{className:"font-medium pr-2"},e,":"),Object(d.createElement)("div",{className:"flex-1 flex flex-wrap justify-end"},n))})),target:m}):m)},ye=({schema:e})=>Object(d.createElement)("div",Object.assign({},"string"==typeof e.type&&e.type in me?{className:"ml-2 "+me[e.type]}:{className:"ml-2"}),`<${e.format}>`);function be(e){if(null===e.parent)return!1;try{const{path:t}=N(e);if(0===t.length)return!1;const r=function(e){const t=A(e);return"schemaNode"in t?g(t.schemaNode)?t.schemaNode.items:t.schema:null}(e.parent);return null!==r&&!Array.isArray(r)&&k(r)===s.Object&&Array.isArray(r.required)&&r.required.includes(String(t[t.length-1]))}catch(e){return!1}}const Oe=({node:e,onGoToRef:t,rowOptions:r})=>{var n;const a=N(e),{schemaNode:o}=a,l=null!==e.parent&&i.Tree.getLevel(e.parent)>=0&&(null===(n=N(e.parent))||void 0===n?void 0:n.schemaNode)||null,c="annotations"in o?o.annotations.description:null,p=j(o)||k(o)===s.Array&&v(o);return Object(d.createElement)(d.Fragment,null,p||Object(i.isParentNode)(e)&&i.Tree.getLevel(e)>0?Object(d.createElement)(se,{isExpanded:!!r.isExpanded,style:Object.assign({width:20,height:20},p&&0===i.Tree.getLevel(e)?{position:"relative"}:{left:-23.5}),size:12}):null,null!==e.parent&&e.parent.children.length>0&&null!==l&&"combiner"in l&&e.parent.children[0]!==e&&Object(d.createElement)(le,{kind:l.combiner}),Object(d.createElement)("div",{className:"flex-1 flex truncate"},Object(d.createElement)(fe,{node:e,onGoToRef:t}),a.schema.type&&"string"==typeof a.schema.format&&Object(d.createElement)(ye,{schema:a.schema}),c&&Object(d.createElement)(ae,{value:c})),Object(d.createElement)(he,{required:be(e),validations:Object.assign(Object.assign({},"annotations"in o&&o.annotations.default&&{default:o.annotations.default}),"validations"in o&&o.validations)}))};Oe.displayName="JsonSchemaViewer.SchemaPropertyRow";const ge=({message:e})=>Object(d.createElement)("span",{className:"text-red-5 dark:text-red-4"},e);ge.displayName="JsonSchemaViewer.SchemaErrorRow";const je=({className:e,node:t,rowOptions:r,onGoToRef:n})=>{const s=A(t);return Object(d.createElement)("div",{className:l()("px-2 flex-1 w-full max-w-full",e)},Object(d.createElement)("div",{className:"flex items-center text-sm relative",style:{marginLeft:20*i.Tree.getLevel(t)}},"schema"in s?Object(d.createElement)(Oe,{node:t,onGoToRef:n,rowOptions:r}):Object(d.createElement)(ge,{message:s.error})))};je.displayName="JsonSchemaViewer.SchemaRow";const ve=()=>!1,xe=Object(u.observer)(e=>{const{hideTopBar:t,name:r,treeStore:n,maxRows:s,onGoToRef:a,rowRenderer:o}=e;Object(d.useEffect)(()=>(n.events.on(i.TreeListEvents.NodeClick,(e,t)=>{"children"in t&&n.toggleExpand(t)}),()=>{n.dispose()}),[n]);const l=Object(d.useCallback)((e,t)=>void 0!==o?o(e,t,n):Object(d.createElement)(je,{node:e,rowOptions:t,onGoToRef:a}),[a,o,n]);return Object(d.createElement)(d.Fragment,null,r&&!t&&Object(d.createElement)("div",{className:"flex items-center text-sm px-2 font-semibold",style:{height:30}},r),Object(d.createElement)(i.TreeList,{striped:!0,maxRows:void 0!==s?s+.5:s,store:n,rowRenderer:l,canDrag:ve}))});xe.displayName="JsonSchemaViewer.SchemaTree";const we=Object(d.createContext)("standalone");we.displayName="ViewModeContext";const Ee=Object(d.createContext)(new i.TreeStore(new ne({},new i.TreeState,{mergeAllOf:!0,expandedDepth:-1,resolveRef:void 0,shouldResolveEagerly:!1,onPopulate:void 0}),new i.TreeState));Ee.displayName="SchemaTreeStoreContext";class Ae extends d.PureComponent{constructor(e){super(e),this.treeState=new i.TreeState,this.tree=new ne(e.schema,this.treeState,this.treeOptions),this.treeStore=new i.TreeStore(this.tree,this.treeState,{defaultExpandedDepth:this.expandedDepth})}get treeOptions(){return{expandedDepth:this.expandedDepth,mergeAllOf:this.mergeAllOf,resolveRef:this.props.resolveRef,shouldResolveEagerly:!!this.props.shouldResolveEagerly,onPopulate:this.props.onTreePopulate,viewMode:this.props.viewMode}}get mergeAllOf(){return!1!==this.props.mergeAllOf}get expandedDepth(){return this.props.expanded?1/0:void 0!==this.props.defaultExpandedDepth?this.props.defaultExpandedDepth:1}renderSchema(){this.tree.count>0&&this.tree.setRoot(i.Tree.createArtificialRoot()),this.tree.populate()}componentDidMount(){this.renderSchema()}componentDidUpdate(e){e.resolveRef!==this.props.resolveRef&&(this.tree.treeOptions.resolveRef=this.props.resolveRef),e.onTreePopulate!==this.props.onTreePopulate&&(this.tree.treeOptions.onPopulate=this.props.onTreePopulate),this.treeStore.defaultExpandedDepth===this.expandedDepth&&e.schema===this.props.schema&&e.mergeAllOf===this.props.mergeAllOf&&e.shouldResolveEagerly===this.props.shouldResolveEagerly&&e.viewMode===this.props.viewMode||(this.treeStore.defaultExpandedDepth=this.expandedDepth,this.tree.treeOptions=this.treeOptions,this.tree.schema=this.props.schema,this.renderSchema())}render(){var e;const t=this.props,{emptyText:r="No schema defined",name:n,schema:i,expanded:s,defaultExpandedDepth:a,className:o}=t,c=y(t,["emptyText","name","schema","expanded","defaultExpandedDepth","className"]);return(e=>{if("object"!=typeof e||null===e)return!0;const t=Object.keys(e);return!(1!==t.length||(r=t[0],!ie.includes(r)))&&Object(m.isEmpty)(Object(m.get)(e,t[0],[]));var r})(i)?Object(d.createElement)("div",null,r):Object(d.createElement)("div",{className:l()(o,"JsonSchemaViewer flex flex-col relative")},Object(d.createElement)(we.Provider,{value:null!==(e=this.props.viewMode)&&void 0!==e?e:"standalone"},Object(d.createElement)(Ee.Provider,{value:this.treeStore},Object(d.createElement)(xe,Object.assign({expanded:s,name:n,schema:i,treeStore:this.treeStore},c)))))}}!function(e,t,r,n){var i,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(s<3?i(a):s>3?i(t,r,a):i(t,r))||a);s>3&&a&&Object.defineProperty(t,r,a)}([c.action,b("design:type",Function),b("design:paramtypes",[Object]),b("design:returntype",void 0)],Ae.prototype,"componentDidUpdate",null);const Ne=Object(n.withErrorBoundary)(Ae,{FallbackComponent:({error:e})=>Object(d.createElement)("div",{className:"p-4"},Object(d.createElement)("b",{className:"text-danger"},"Error"),e&&": "+e.message),recoverableProps:["schema"],reportErrors:!1})}}]);